{"version":3,"file":"subscribe.js","sources":["../../src/js/modules/LanguageSwitcher.js","../../src/js/modules/ThankYouPageManager.js","../../src/js/subscribe.js"],"sourcesContent":["const SELECTORS = {\n    CUSTOM: '.lang-switcher__custom',\n    SELECTED: '.lang-switcher__selected',\n    TEXT: '.lang-switcher__text',\n    OPTIONS: '.lang-switcher__option'\n};\n\nconst CSS_CLASSES = {\n    ACTIVE: 'active',\n    SELECTED: 'selected'\n};\n\nconst STORAGE_KEY = 'language';\nconst SUBSCRIBE_PAGE = 'subscribe.html';\n\nconst COUNTRY_MAP = {\n    HR: 'hr',\n    SI: 'sl'\n};\n\nconst LANGUAGE_MAP = {\n    hr: 'hr',\n    sl: 'sl'\n};\n\nconst API_URL = 'https://ipapi.co/json/';\n\nexport const LanguageSwitcher = {\n    async detectUserLanguage() {\n        try {\n            const response = await fetch(API_URL);\n            const data = await response.json();\n            const countryCode = data.country_code;\n\n            return COUNTRY_MAP[countryCode] || '';\n        } catch (error) {\n            console.warn('Failed to detect language from IP:', error);\n            const browserLang = navigator.language.split('-')[0];\n            return LANGUAGE_MAP[browserLang] || '';\n        }\n    },\n\n    async getLanguage() {\n        let savedLang = localStorage.getItem(STORAGE_KEY);\n\n        if (savedLang === null) {\n            savedLang = await this.detectUserLanguage();\n            localStorage.setItem(STORAGE_KEY, savedLang);\n        }\n\n        return savedLang;\n    },\n\n    redirectIfNeeded(savedLang) {\n        const currentPath = window.location.pathname;\n        const isSubscribePage = currentPath.includes(SUBSCRIBE_PAGE);\n        const queryParams = window.location.search;\n\n        if (savedLang && !currentPath.includes(`/${savedLang}/`)) {\n            window.location.href = isSubscribePage\n                ? `/${savedLang}/${SUBSCRIBE_PAGE}${queryParams}`\n                : `/${savedLang}/${queryParams}`;\n            return true;\n        }\n\n        return false;\n    },\n\n    toggleDropdown(custom) {\n        custom.classList.toggle(CSS_CLASSES.ACTIVE);\n    },\n\n    closeDropdown(custom) {\n        custom.classList.remove(CSS_CLASSES.ACTIVE);\n    },\n\n    setSelectedLanguage(text, options, currentLang) {\n        const currentOption = Array.from(options).find(opt => opt.dataset.code === currentLang);\n        text.textContent = currentOption?.textContent || 'EN';\n        currentOption?.classList.add(CSS_CLASSES.SELECTED);\n    },\n\n    handleOptionClick(option, text, options, custom) {\n        const value = option.dataset.value;\n        const code = option.dataset.code;\n        const queryParams = window.location.search;\n\n        text.textContent = option.textContent;\n        options.forEach(opt => opt.classList.remove(CSS_CLASSES.SELECTED));\n        option.classList.add(CSS_CLASSES.SELECTED);\n        this.closeDropdown(custom);\n\n        localStorage.setItem(STORAGE_KEY, code === 'en' ? '' : code);\n        window.location.href = value + queryParams;\n    },\n\n    // bug fix. EN - HR\n    bindCustomSelect() {\n        const custom = document.querySelector(SELECTORS.CUSTOM);\n        const selected = document.querySelector(SELECTORS.SELECTED);\n        const text = document.querySelector(SELECTORS.TEXT);\n        const options = document.querySelectorAll(SELECTORS.OPTIONS);\n\n        if (!custom || !selected) {\n            console.warn('No language switcher found');\n            return;\n        }\n\n        const currentLang = localStorage.getItem(STORAGE_KEY) || 'en';\n        this.setSelectedLanguage(text, options, currentLang);\n\n        selected.addEventListener('click', (e) => {\n            e.stopPropagation();\n            this.toggleDropdown(custom);\n        });\n\n        options.forEach(option => {\n            option.addEventListener('click', () => {\n                this.handleOptionClick(option, text, options, custom);\n            });\n        });\n\n        document.addEventListener('click', () => {\n            this.closeDropdown(custom);\n        });\n    },\n\n    async init() {\n        try {\n            const savedLang = await this.getLanguage();\n            const redirected = this.redirectIfNeeded(savedLang);\n\n            if (!redirected) {\n                this.bindCustomSelect();\n            }\n        } catch (error) {\n            console.error('LanguageSwitcher initialization failed:', error);\n            this.bindCustomSelect();\n        }\n    }\n};","const SELECTORS = {\n    CALL_TEXT: '.thank-you__text--callback',\n    ORDER_TEXT: '.thank-you__text--order',\n};\n\nconst CSS_CLASSES = {\n    HIDDEN: 'hidden',\n};\n\nexport const ThankYouPageManager = {\n    setCongratulationText() {\n        const queryParams = new URLSearchParams(window.location.search);\n        const redirectType = queryParams.get('redirect');\n\n        const callText = document.querySelector(SELECTORS.CALL_TEXT);\n        const orderText = document.querySelector(SELECTORS.ORDER_TEXT);\n\n        if (!callText || !orderText) {\n            console.warn('Congratulation text elements not found');\n            return;\n        }\n\n        switch (redirectType) {\n            case 'call_request':\n                callText.classList.remove(CSS_CLASSES.HIDDEN);\n                orderText.classList.add(CSS_CLASSES.HIDDEN);\n                break;\n            case 'order':\n                orderText.classList.remove(CSS_CLASSES.HIDDEN);\n                callText.classList.add(CSS_CLASSES.HIDDEN);\n                break;\n            default:\n                console.warn('Unknown redirect type, showing default text');\n        }\n    },\n\n    init() {\n        this.setCongratulationText();\n    }\n};\n","import {LanguageSwitcher} from \"./modules/LanguageSwitcher\";\nimport {ThankYouPageManager} from \"./modules/ThankYouPageManager\";\n\nfunction main() {\n    LanguageSwitcher.init()\n    ThankYouPageManager.init()\n}\n\nmain();\n\n// if (document.documentElement.clientWidth < 480) {\n//     window.addEventListener('scroll',\n//         function () {\n//             return setTimeout(main, 1000);\n//         }, {\n//             once: true\n//         });\n// } else {\n//     main();\n// }\n"],"names":["SELECTORS","CUSTOM","SELECTED","TEXT","OPTIONS","CSS_CLASSES","ACTIVE","STORAGE_KEY","SUBSCRIBE_PAGE","COUNTRY_MAP","HR","SI","LANGUAGE_MAP","hr","sl","API_URL","LanguageSwitcher","detectUserLanguage","response","fetch","data","json","countryCode","country_code","error","console","warn","browserLang","navigator","language","split","getLanguage","savedLang","localStorage","getItem","setItem","redirectIfNeeded","currentPath","window","location","pathname","isSubscribePage","includes","queryParams","search","href","toggleDropdown","custom","classList","toggle","closeDropdown","remove","setSelectedLanguage","text","options","currentLang","currentOption","Array","from","find","opt","dataset","code","textContent","add","handleOptionClick","option","value","forEach","bindCustomSelect","document","querySelector","selected","querySelectorAll","addEventListener","e","stopPropagation","init","redirected","CALL_TEXT","ORDER_TEXT","HIDDEN","ThankYouPageManager","setCongratulationText","URLSearchParams","redirectType","get","callText","orderText","main"],"mappings":"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"}