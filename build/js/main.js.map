{"version":3,"file":"main.js","sources":["../../src/js/modules/ScreenManager.js","../../src/js/modules/FormsManager.js","../../src/js/modules/NichesAccordion.js","../../src/js/modules/AppState.js","../../src/js/modules/LanguageSwitcher.js","../../src/js/main.js"],"sourcesContent":["const SELECTORS = {\n    SCREEN: '.screen',\n    VISIBLE_SCREEN: '.screen:not(.hidden)',\n    NAVIGATION_BUTTON: '[data-target-screen]'\n};\n\nconst CSS_CLASSES = {\n    HIDDEN: 'hidden',\n    SCREEN_EXIT: 'screen-exit',\n    SCREEN_ENTER: 'screen-enter'\n};\n\nconst TRANSITION_DURATION = 300; // Match CSS transition duration\n\nexport const ScreenManager = {\n    goToScreen(screenId) {\n        const screens = document.querySelectorAll(SELECTORS.SCREEN);\n        const targetScreen = document.getElementById(screenId);\n\n        if (!targetScreen) {\n            console.error(`Screen with ID \"${screenId}\" not found.`);\n            return;\n        }\n\n        const currentScreen = document.querySelector(SELECTORS.VISIBLE_SCREEN);\n\n        if (currentScreen) {\n            currentScreen.classList.add(CSS_CLASSES.SCREEN_EXIT);\n\n            setTimeout(() => {\n                screens.forEach(screen => {\n                    screen.classList.add(CSS_CLASSES.HIDDEN);\n                    screen.classList.remove(CSS_CLASSES.SCREEN_EXIT, CSS_CLASSES.SCREEN_ENTER);\n                });\n\n                targetScreen.classList.remove(CSS_CLASSES.HIDDEN);\n                targetScreen.classList.add(CSS_CLASSES.SCREEN_ENTER);\n            }, TRANSITION_DURATION);\n        } else {\n            targetScreen.classList.remove(CSS_CLASSES.HIDDEN);\n        }\n    },\n\n    bindButtons() {\n        const buttons = document.querySelectorAll(SELECTORS.NAVIGATION_BUTTON);\n\n        if (buttons.length === 0) {\n            console.warn('No navigation buttons found');\n            return;\n        }\n\n        buttons.forEach(button => {\n            button.addEventListener('click', () => {\n                const targetScreen = button.dataset.targetScreen;\n                this.goToScreen(targetScreen);\n            });\n        });\n    },\n\n    init() {\n        this.bindButtons();\n    }\n};\n","const SUBSCRIBE_PAGE = 'subscribe.html';\n\nconst SELECTORS = {\n    CALL_FORM: '.intro-popup__form',\n    PROMO_CODE_FORM: '.intro-success__form',\n    PROMO_CODE_INPUT: '[name=\"promo-code\"]',\n    PROMO_CODE_BUTTON: '.intro-success__submit',\n    ORDER_FORM: '.order__form',\n}\n\nconst CallRequestForm = {\n    init() {\n        const callRequestForm = document.querySelector(SELECTORS.CALL_FORM);\n\n        if (!callRequestForm) {\n            console.warn('Call request form not found');\n            return;\n        }\n\n        callRequestForm.addEventListener('submit', e => {\n            e.preventDefault();\n            window.location.href = `${window.location.origin}/${SUBSCRIBE_PAGE}`;\n        });\n    }\n}\n\nconst PromoCodeForm = {\n    init() {\n        const promoCodeForm = document.querySelector(SELECTORS.PROMO_CODE_FORM);\n\n        if (!promoCodeForm) {\n            console.warn('Promocode form not found');\n            return;\n        }\n\n        const promoCodeInput = promoCodeForm.querySelector(SELECTORS.PROMO_CODE_INPUT);\n        const promoCodeButton = promoCodeForm.querySelector(SELECTORS.PROMO_CODE_BUTTON);\n\n        if (!promoCodeInput || !promoCodeButton) {\n            console.warn('Promocode input or button not found');\n            return;\n        }\n\n        promoCodeButton.disabled = promoCodeInput.value.trim() === '';\n\n        promoCodeForm.addEventListener('submit', e => {\n            e.preventDefault();\n        });\n\n        promoCodeInput.addEventListener('input', e => {\n           promoCodeButton.disabled = e.target.value.trim() === '';\n        });\n    }\n}\n\nconst OrderForm = {\n    init() {\n        const orderForm = document.querySelector(SELECTORS.ORDER_FORM);\n\n        if (!orderForm) {\n            console.warn('Order form not found');\n            return;\n        }\n\n        orderForm.addEventListener('submit', e => {\n            e.preventDefault();\n            window.location.href = `${window.location.origin}/${SUBSCRIBE_PAGE}`;\n        });\n    }\n}\n\nexport const FormsManager = {\n    init() {\n        CallRequestForm.init();\n        PromoCodeForm.init();\n        OrderForm.init();\n    }\n}","const SELECTORS = {\n    PROBLEMS_SCREEN: '#screen-problems',\n    ACCORDION_ITEMS: '.accordion-item',\n    ACCORDION_HEADER: '.accordion-header',\n    ACCORDION_CONTENT: '.accordion-content',\n    RADIO_INPUT: 'input[type=\"radio\"]',\n    NEXT_BUTTON: '.problems__next'\n};\n\nexport const NichesAccordion = {\n    handleAccordionClick(clickedItem, allItems) {\n        const wasActive = clickedItem.classList.contains('active');\n\n        allItems.forEach(item => item.classList.remove('active'));\n\n        if (!wasActive) {\n            clickedItem.classList.add('active');\n        }\n    },\n\n    init() {\n        const problemsScreen = document.querySelector(SELECTORS.PROBLEMS_SCREEN);\n\n        if (!problemsScreen) {\n            console.warn('Problems screen not found');\n            return;\n        }\n\n        const accordionItems = problemsScreen.querySelectorAll(SELECTORS.ACCORDION_ITEMS);\n        const nextButton = problemsScreen.querySelector(SELECTORS.NEXT_BUTTON);\n\n\n        if (!accordionItems.length || !nextButton) {\n            console.warn('Accordion items or next button not found');\n            return;\n        }\n\n        nextButton.disabled = true;\n\n        accordionItems.forEach(item => {\n            const header = item.querySelector(SELECTORS.ACCORDION_HEADER);\n            const radioInput = header?.querySelector(SELECTORS.RADIO_INPUT);\n\n            if (!header || !radioInput) return;\n\n            radioInput.addEventListener('change', () => {\n                this.handleAccordionClick(item, accordionItems);\n                nextButton.disabled = false;\n            });\n        });\n    }\n}","export const AppState = {\n    storageKey: 'appState',\n    state: null,\n\n    init() {\n        this.state = this._loadState() || this._initializeState();\n    },\n\n    _initializeState() {\n        const now = Date.now();\n        const initialState = {\n            userId: this._generateUserId(),\n            createdAt: this._formatLocalDate(now),\n            createdAtInKyiv: this._formatKyivDate(now),\n            updatedAt: this._formatLocalDate(now),\n            updatedAtInKyiv: this._formatKyivDate(now),\n            data: {}\n        };\n        this._saveToStorage(initialState);\n        return initialState;\n    },\n\n    _generateUserId() {\n        return Math.random().toString(36).substring(2, 8);\n    },\n\n    _formatLocalDate(timestamp) {\n        const date = new Date(timestamp);\n        return this._formatToCustomString(date);\n    },\n\n    _formatKyivDate(timestamp) {\n        const date = new Date(timestamp);\n        return this._formatToCustomString(date, 'Europe/Kiev');\n    },\n\n    _formatToCustomString(date, timeZone) {\n        const options = {\n            year: 'numeric',\n            month: '2-digit',\n            day: '2-digit',\n            hour: '2-digit',\n            minute: '2-digit',\n            second: '2-digit',\n            hour12: false\n        };\n\n        if (timeZone) {\n            options.timeZone = timeZone;\n        }\n\n        const formatted = new Intl.DateTimeFormat('en-GB', options).format(date);\n        return formatted.replace(/\\//g, '.').replace(',', ',');\n    },\n\n    _loadState() {\n        try {\n            const stored = localStorage.getItem(this.storageKey);\n            return stored ? JSON.parse(stored) : null;\n        } catch (error) {\n            console.error('Failed to load state:', error);\n            return null;\n        }\n    },\n\n    _saveToStorage(state) {\n        try {\n            localStorage.setItem(this.storageKey, JSON.stringify(state));\n        } catch (error) {\n            console.error('Failed to save state:', error);\n        }\n    },\n\n    set(key, value) {\n        this.state.data[key] = value;\n        this.state.updatedAt = this._formatLocalDate(Date.now());\n        this.state.updatedAtInKyiv = this._formatKyivDate(Date.now())\n        this._saveToStorage(this.state);\n    },\n\n    get(key) {\n        return this.state.data[key];\n    },\n\n    getAll() {\n        return { ...this.state };\n    },\n\n    getUserId() {\n        return this.state.userId;\n    },\n\n    getCreatedAt() {\n        return this.state.createdAt;\n    },\n\n    getUpdatedAt() {\n        return this.state.updatedAt;\n    },\n\n    clear() {\n        this.state = this._initializeState();\n    }\n};","const SELECTORS = {\n    CUSTOM: '.lang-switcher__custom',\n    SELECTED: '.lang-switcher__selected',\n    TEXT: '.lang-switcher__text',\n    OPTIONS: '.lang-switcher__option'\n};\n\nconst CSS_CLASSES = {\n    ACTIVE: 'active',\n    SELECTED: 'selected'\n};\n\nconst STORAGE_KEY = 'language';\nconst SUBSCRIBE_PAGE = 'subscribe.html';\n\nconst COUNTRY_MAP = {\n    HR: 'hr',\n    SI: 'sl'\n};\n\nconst LANGUAGE_MAP = {\n    hr: 'hr',\n    sl: 'sl'\n};\n\nconst API_URL = 'https://ipapi.co/json/';\n\nexport const LanguageSwitcher = {\n    async detectUserLanguage() {\n        try {\n            const response = await fetch(API_URL);\n            const data = await response.json();\n            const countryCode = data.country_code;\n\n            return COUNTRY_MAP[countryCode] || '';\n        } catch (error) {\n            console.warn('Failed to detect language from IP:', error);\n            const browserLang = navigator.language.split('-')[0];\n            return LANGUAGE_MAP[browserLang] || '';\n        }\n    },\n\n    async getLanguage() {\n        let savedLang = localStorage.getItem(STORAGE_KEY);\n\n        if (savedLang === null) {\n            savedLang = await this.detectUserLanguage();\n            localStorage.setItem(STORAGE_KEY, savedLang);\n        }\n\n        return savedLang;\n    },\n\n    redirectIfNeeded(savedLang) {\n        const currentPath = window.location.pathname;\n        const isSubscribePage = currentPath.includes(SUBSCRIBE_PAGE);\n\n        if (savedLang && !currentPath.includes(`/${savedLang}/`)) {\n            window.location.href = isSubscribePage\n                ? `/${savedLang}/${SUBSCRIBE_PAGE}`\n                : `/${savedLang}/`;\n            return true;\n        }\n\n        return false;\n    },\n\n    toggleDropdown(custom) {\n        custom.classList.toggle(CSS_CLASSES.ACTIVE);\n    },\n\n    closeDropdown(custom) {\n        custom.classList.remove(CSS_CLASSES.ACTIVE);\n    },\n\n    setSelectedLanguage(text, options, currentLang) {\n        const currentOption = Array.from(options).find(opt => opt.dataset.code === currentLang);\n        text.textContent = currentOption?.textContent || 'EN';\n        currentOption?.classList.add(CSS_CLASSES.SELECTED);\n    },\n\n    handleOptionClick(option, text, options, custom) {\n        const value = option.dataset.value;\n        const code = option.dataset.code;\n\n        text.textContent = option.textContent;\n        options.forEach(opt => opt.classList.remove(CSS_CLASSES.SELECTED));\n        option.classList.add(CSS_CLASSES.SELECTED);\n        this.closeDropdown(custom);\n\n        localStorage.setItem(STORAGE_KEY, code === 'en' ? '' : code);\n        window.location.href = value;\n    },\n\n    bindCustomSelect() {\n        const custom = document.querySelector(SELECTORS.CUSTOM);\n        const selected = document.querySelector(SELECTORS.SELECTED);\n        const text = document.querySelector(SELECTORS.TEXT);\n        const options = document.querySelectorAll(SELECTORS.OPTIONS);\n\n        if (!custom || !selected) {\n            console.warn('No language switcher found');\n            return;\n        }\n\n        const currentLang = localStorage.getItem(STORAGE_KEY) || 'en';\n        this.setSelectedLanguage(text, options, currentLang);\n\n        selected.addEventListener('click', (e) => {\n            e.stopPropagation();\n            this.toggleDropdown(custom);\n        });\n\n        options.forEach(option => {\n            option.addEventListener('click', () => {\n                this.handleOptionClick(option, text, options, custom);\n            });\n        });\n\n        document.addEventListener('click', () => {\n            this.closeDropdown(custom);\n        });\n    },\n\n    async init() {\n        try {\n            const savedLang = await this.getLanguage();\n            const redirected = this.redirectIfNeeded(savedLang);\n\n            if (!redirected) {\n                this.bindCustomSelect();\n            }\n        } catch (error) {\n            console.error('LanguageSwitcher initialization failed:', error);\n            this.bindCustomSelect();\n        }\n    }\n};","import {ScreenManager} from \"./modules/ScreenManager\";\nimport {FormsManager} from \"./modules/FormsManager\";\nimport {NichesAccordion} from \"./modules/NichesAccordion\";\nimport {AppState} from \"./modules/AppState\";\nimport {LanguageSwitcher} from \"./modules/LanguageSwitcher\";\n\nfunction main() {\n  AppState.init()\n  LanguageSwitcher.init()\n  ScreenManager.init();\n  FormsManager.init();\n  NichesAccordion.init();\n}\n\nif (document.documentElement.clientWidth < 480) {\n  window.addEventListener('scroll',\n    function () {\n      return setTimeout(main, 1000);\n    }, {\n      once: true\n    });\n} else {\n  main();\n}\n"],"names":["SELECTORS","SCREEN","VISIBLE_SCREEN","NAVIGATION_BUTTON","CSS_CLASSES","HIDDEN","SCREEN_EXIT","SCREEN_ENTER","TRANSITION_DURATION","ScreenManager","goToScreen","screenId","screens","document","querySelectorAll","targetScreen","getElementById","console","error","currentScreen","querySelector","classList","add","setTimeout","forEach","screen","remove","bindButtons","buttons","length","warn","button","addEventListener","dataset","init","SUBSCRIBE_PAGE","CALL_FORM","PROMO_CODE_FORM","PROMO_CODE_INPUT","PROMO_CODE_BUTTON","ORDER_FORM","CallRequestForm","callRequestForm","e","preventDefault","window","location","href","origin","PromoCodeForm","promoCodeForm","promoCodeInput","promoCodeButton","disabled","value","trim","target","OrderForm","orderForm","FormsManager","PROBLEMS_SCREEN","ACCORDION_ITEMS","ACCORDION_HEADER","ACCORDION_CONTENT","RADIO_INPUT","NEXT_BUTTON","NichesAccordion","handleAccordionClick","clickedItem","allItems","wasActive","contains","item","problemsScreen","accordionItems","nextButton","header","radioInput","AppState","storageKey","state","_loadState","_initializeState","now","Date","initialState","userId","_generateUserId","createdAt","_formatLocalDate","createdAtInKyiv","_formatKyivDate","updatedAt","updatedAtInKyiv","data","_saveToStorage","Math","random","toString","substring","timestamp","date","_formatToCustomString","timeZone","options","year","month","day","hour","minute","second","hour12","formatted","Intl","DateTimeFormat","format","replace","stored","localStorage","getItem","JSON","parse","setItem","stringify","set","key","get","getAll","getUserId","getCreatedAt","getUpdatedAt","clear","CUSTOM","SELECTED","TEXT","OPTIONS","ACTIVE","STORAGE_KEY","COUNTRY_MAP","HR","SI","LANGUAGE_MAP","hr","sl","API_URL","LanguageSwitcher","detectUserLanguage","response","fetch","json","countryCode","country_code","browserLang","navigator","language","split","getLanguage","savedLang","redirectIfNeeded","currentPath","pathname","isSubscribePage","includes","toggleDropdown","custom","toggle","closeDropdown","setSelectedLanguage","text","currentLang","currentOption","Array","from","find","opt","code","textContent","handleOptionClick","option","bindCustomSelect","selected","stopPropagation","redirected","main","documentElement","clientWidth","once"],"mappings":"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"}