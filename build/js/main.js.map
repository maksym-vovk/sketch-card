{"version":3,"file":"main.js","sources":["../../src/js/modules/ScreenManager.js","../../src/js/modules/FormsManager.js","../../src/js/modules/NichesAccordion.js","../../src/js/modules/AppState.js","../../src/js/modules/LanguageSwitcher.js","../../src/js/main.js"],"sourcesContent":["const SELECTORS = {\r\n    SCREEN: '.screen',\r\n    VISIBLE_SCREEN: '.screen:not(.hidden)',\r\n    NAVIGATION_BUTTON: '[data-target-screen]'\r\n};\r\n\r\nconst CSS_CLASSES = {\r\n    HIDDEN: 'hidden',\r\n    SCREEN_EXIT: 'screen-exit',\r\n    SCREEN_ENTER: 'screen-enter'\r\n};\r\n\r\nconst TRANSITION_DURATION = 300; // Match CSS transition duration\r\n\r\nexport const ScreenManager = {\r\n    goToScreen(screenId) {\r\n        const screens = document.querySelectorAll(SELECTORS.SCREEN);\r\n        const targetScreen = document.getElementById(screenId);\r\n\r\n        if (!targetScreen) {\r\n            console.error(`Screen with ID \"${screenId}\" not found.`);\r\n            return;\r\n        }\r\n\r\n        const currentScreen = document.querySelector(SELECTORS.VISIBLE_SCREEN);\r\n\r\n        if (currentScreen) {\r\n            currentScreen.classList.add(CSS_CLASSES.SCREEN_EXIT);\r\n\r\n            setTimeout(() => {\r\n                screens.forEach(screen => {\r\n                    screen.classList.add(CSS_CLASSES.HIDDEN);\r\n                    screen.classList.remove(CSS_CLASSES.SCREEN_EXIT, CSS_CLASSES.SCREEN_ENTER);\r\n                });\r\n\r\n                targetScreen.classList.remove(CSS_CLASSES.HIDDEN);\r\n                targetScreen.classList.add(CSS_CLASSES.SCREEN_ENTER);\r\n            }, TRANSITION_DURATION);\r\n        } else {\r\n            targetScreen.classList.remove(CSS_CLASSES.HIDDEN);\r\n        }\r\n    },\r\n\r\n    bindButtons() {\r\n        const buttons = document.querySelectorAll(SELECTORS.NAVIGATION_BUTTON);\r\n\r\n        if (buttons.length === 0) {\r\n            console.warn('No navigation buttons found');\r\n            return;\r\n        }\r\n\r\n        buttons.forEach(button => {\r\n            button.addEventListener('click', () => {\r\n                const targetScreen = button.dataset.targetScreen;\r\n                this.goToScreen(targetScreen);\r\n            });\r\n        });\r\n    },\r\n\r\n    init() {\r\n        this.bindButtons();\r\n    }\r\n};\r\n","const SUBSCRIBE_PAGE = 'subscribe.html';\r\n\r\nconst SELECTORS = {\r\n    CALL_FORM: '.intro-popup__form',\r\n    PROMO_CODE_FORM: '.intro-success__form',\r\n    PROMO_CODE_INPUT: '[name=\"promo-code\"]',\r\n    PROMO_CODE_BUTTON: '.intro-success__submit',\r\n    ORDER_FORM: '.order__form',\r\n}\r\n\r\nconst redirectTypes = {\r\n    CALL_REQUEST: 'call_request',\r\n    ORDER: 'order'\r\n};\r\n\r\nconst CallRequestForm = {\r\n    init() {\r\n        const callRequestForm = document.querySelector(SELECTORS.CALL_FORM);\r\n\r\n        if (!callRequestForm) {\r\n            console.warn('Call request form not found');\r\n            return;\r\n        }\r\n\r\n        callRequestForm.addEventListener('submit', e => {\r\n            e.preventDefault();\r\n            window.location.href = `${window.location.origin}/${SUBSCRIBE_PAGE}?redirect=${redirectTypes.CALL_REQUEST}`;\r\n        });\r\n    }\r\n}\r\n\r\nconst PromoCodeForm = {\r\n    init() {\r\n        const promoCodeForm = document.querySelector(SELECTORS.PROMO_CODE_FORM);\r\n\r\n        if (!promoCodeForm) {\r\n            console.warn('Promocode form not found');\r\n            return;\r\n        }\r\n\r\n        const promoCodeInput = promoCodeForm.querySelector(SELECTORS.PROMO_CODE_INPUT);\r\n        const promoCodeButton = promoCodeForm.querySelector(SELECTORS.PROMO_CODE_BUTTON);\r\n\r\n        if (!promoCodeInput || !promoCodeButton) {\r\n            console.warn('Promocode input or button not found');\r\n            return;\r\n        }\r\n\r\n        promoCodeButton.disabled = promoCodeInput.value.trim() === '';\r\n\r\n        promoCodeForm.addEventListener('submit', e => {\r\n            e.preventDefault();\r\n        });\r\n\r\n        promoCodeInput.addEventListener('input', e => {\r\n           promoCodeButton.disabled = e.target.value.trim() === '';\r\n        });\r\n    }\r\n}\r\n\r\nconst OrderForm = {\r\n    init() {\r\n        const orderForm = document.querySelector(SELECTORS.ORDER_FORM);\r\n\r\n        if (!orderForm) {\r\n            console.warn('Order form not found');\r\n            return;\r\n        }\r\n\r\n        orderForm.addEventListener('submit', e => {\r\n            e.preventDefault();\r\n            window.location.href = `${window.location.origin}/${SUBSCRIBE_PAGE}?redirect=${redirectTypes.ORDER}`;\r\n        });\r\n    }\r\n}\r\n\r\nexport const FormsManager = {\r\n    init() {\r\n        CallRequestForm.init();\r\n        PromoCodeForm.init();\r\n        OrderForm.init();\r\n    }\r\n}","const SELECTORS = {\r\n    PROBLEMS_SCREEN: '#screen-problems',\r\n    ACCORDION_CONTAINER: '.problems-wrapper',\r\n    ACCORDION_ITEMS: '.accordion-item',\r\n    ACCORDION_HEADER: '.accordion-header',\r\n    ACCORDION_CONTENT: '.accordion-content',\r\n    RADIO_INPUT: 'input[type=\"radio\"]',\r\n    NEXT_BUTTON: '.problems__next'\r\n};\r\n\r\nconst CSS_CLASSES = {\r\n    ACTIVE: 'active'\r\n};\r\n\r\nexport const NichesAccordion = {\r\n    nextButton: null,\r\n\r\n    handleAccordionClick(clickedItem, allItems) {\r\n        allItems.forEach(item => item.classList.remove(CSS_CLASSES.ACTIVE));\r\n        clickedItem.classList.add(CSS_CLASSES.ACTIVE);\r\n    },\r\n\r\n    handleClick(event, allItems) {\r\n        const accordionItem = event.target.closest(SELECTORS.ACCORDION_ITEMS);\r\n        const radioInput = accordionItem?.querySelector(SELECTORS.RADIO_INPUT);\r\n\r\n        if (!accordionItem || !radioInput || event.target === radioInput) return;\r\n\r\n        radioInput.checked = true;\r\n        this.handleAccordionClick(accordionItem, allItems);\r\n    },\r\n\r\n    init() {\r\n        const problemsScreen = document.querySelector(SELECTORS.PROBLEMS_SCREEN);\r\n        if (!problemsScreen) return console.warn('Problems screen not found');\r\n\r\n        const accordionItems = problemsScreen.querySelectorAll(SELECTORS.ACCORDION_ITEMS);\r\n\r\n        if (!accordionItems.length) {\r\n            return console.warn('Accordion items or next button not found');\r\n        }\r\n\r\n        problemsScreen.querySelector(SELECTORS.ACCORDION_CONTAINER)\r\n            ?.addEventListener('click', (e) => this.handleClick(e, accordionItems));\r\n    }\r\n};","export const AppState = {\r\n    storageKey: 'appState',\r\n    state: null,\r\n\r\n    init() {\r\n        this.state = this._loadState() || this._initializeState();\r\n    },\r\n\r\n    _initializeState() {\r\n        const now = Date.now();\r\n        const initialState = {\r\n            userId: this._generateUserId(),\r\n            createdAt: this._formatLocalDate(now),\r\n            createdAtInKyiv: this._formatKyivDate(now),\r\n            updatedAt: this._formatLocalDate(now),\r\n            updatedAtInKyiv: this._formatKyivDate(now),\r\n            data: {}\r\n        };\r\n        this._saveToStorage(initialState);\r\n        return initialState;\r\n    },\r\n\r\n    _generateUserId() {\r\n        return Math.random().toString(36).substring(2, 8);\r\n    },\r\n\r\n    _formatLocalDate(timestamp) {\r\n        const date = new Date(timestamp);\r\n        return this._formatToCustomString(date);\r\n    },\r\n\r\n    _formatKyivDate(timestamp) {\r\n        const date = new Date(timestamp);\r\n        return this._formatToCustomString(date, 'Europe/Kiev');\r\n    },\r\n\r\n    _formatToCustomString(date, timeZone) {\r\n        const options = {\r\n            year: 'numeric',\r\n            month: '2-digit',\r\n            day: '2-digit',\r\n            hour: '2-digit',\r\n            minute: '2-digit',\r\n            second: '2-digit',\r\n            hour12: false\r\n        };\r\n\r\n        if (timeZone) {\r\n            options.timeZone = timeZone;\r\n        }\r\n\r\n        const formatted = new Intl.DateTimeFormat('en-GB', options).format(date);\r\n        return formatted.replace(/\\//g, '.').replace(',', ',');\r\n    },\r\n\r\n    _loadState() {\r\n        try {\r\n            const stored = localStorage.getItem(this.storageKey);\r\n            return stored ? JSON.parse(stored) : null;\r\n        } catch (error) {\r\n            console.error('Failed to load state:', error);\r\n            return null;\r\n        }\r\n    },\r\n\r\n    _saveToStorage(state) {\r\n        try {\r\n            localStorage.setItem(this.storageKey, JSON.stringify(state));\r\n        } catch (error) {\r\n            console.error('Failed to save state:', error);\r\n        }\r\n    },\r\n\r\n    set(key, value) {\r\n        this.state.data[key] = value;\r\n        this.state.updatedAt = this._formatLocalDate(Date.now());\r\n        this.state.updatedAtInKyiv = this._formatKyivDate(Date.now())\r\n        this._saveToStorage(this.state);\r\n    },\r\n\r\n    get(key) {\r\n        return this.state.data[key];\r\n    },\r\n\r\n    getAll() {\r\n        return { ...this.state };\r\n    },\r\n\r\n    getUserId() {\r\n        return this.state.userId;\r\n    },\r\n\r\n    getCreatedAt() {\r\n        return this.state.createdAt;\r\n    },\r\n\r\n    getUpdatedAt() {\r\n        return this.state.updatedAt;\r\n    },\r\n\r\n    clear() {\r\n        this.state = this._initializeState();\r\n    }\r\n};","const SELECTORS = {\r\n    CUSTOM: '.lang-switcher__custom',\r\n    SELECTED: '.lang-switcher__selected',\r\n    TEXT: '.lang-switcher__text',\r\n    OPTIONS: '.lang-switcher__option'\r\n};\r\n\r\nconst CSS_CLASSES = {\r\n    ACTIVE: 'active',\r\n    SELECTED: 'selected'\r\n};\r\n\r\nconst STORAGE_KEY = 'language';\r\nconst SUBSCRIBE_PAGE = 'subscribe.html';\r\n\r\nconst COUNTRY_MAP = {\r\n    HR: 'hr',\r\n    SI: 'sl'\r\n};\r\n\r\nconst LANGUAGE_MAP = {\r\n    hr: 'hr',\r\n    sl: 'sl'\r\n};\r\n\r\nconst API_URL = 'https://ipapi.co/json/';\r\n\r\nexport const LanguageSwitcher = {\r\n    async detectUserLanguage() {\r\n        try {\r\n            const response = await fetch(API_URL);\r\n            const data = await response.json();\r\n            const countryCode = data.country_code;\r\n\r\n            return COUNTRY_MAP[countryCode] || '';\r\n        } catch (error) {\r\n            console.warn('Failed to detect language from IP:', error);\r\n            const browserLang = navigator.language.split('-')[0];\r\n            return LANGUAGE_MAP[browserLang] || '';\r\n        }\r\n    },\r\n\r\n    async getLanguage() {\r\n        let savedLang = localStorage.getItem(STORAGE_KEY);\r\n\r\n        if (savedLang === null) {\r\n            savedLang = await this.detectUserLanguage();\r\n            localStorage.setItem(STORAGE_KEY, savedLang);\r\n        }\r\n\r\n        return savedLang;\r\n    },\r\n\r\n    redirectIfNeeded(savedLang) {\r\n        const currentPath = window.location.pathname;\r\n        const isSubscribePage = currentPath.includes(SUBSCRIBE_PAGE);\r\n        const queryParams = window.location.search;\r\n\r\n        if (savedLang && !currentPath.includes(`/${savedLang}/`)) {\r\n            window.location.href = isSubscribePage\r\n                ? `/${savedLang}/${SUBSCRIBE_PAGE}${queryParams}`\r\n                : `/${savedLang}/${queryParams}`;\r\n            return true;\r\n        }\r\n\r\n        return false;\r\n    },\r\n\r\n    toggleDropdown(custom) {\r\n        custom.classList.toggle(CSS_CLASSES.ACTIVE);\r\n    },\r\n\r\n    closeDropdown(custom) {\r\n        custom.classList.remove(CSS_CLASSES.ACTIVE);\r\n    },\r\n\r\n    setSelectedLanguage(text, options, currentLang) {\r\n        const currentOption = Array.from(options).find(opt => opt.dataset.code === currentLang);\r\n        text.textContent = currentOption?.textContent || 'EN';\r\n        currentOption?.classList.add(CSS_CLASSES.SELECTED);\r\n    },\r\n\r\n    handleOptionClick(option, text, options, custom) {\r\n        const value = option.dataset.value;\r\n        const code = option.dataset.code;\r\n        const queryParams = window.location.search;\r\n\r\n        text.textContent = option.textContent;\r\n        options.forEach(opt => opt.classList.remove(CSS_CLASSES.SELECTED));\r\n        option.classList.add(CSS_CLASSES.SELECTED);\r\n        this.closeDropdown(custom);\r\n\r\n        localStorage.setItem(STORAGE_KEY, code === 'en' ? '' : code);\r\n        window.location.href = value + queryParams;\r\n    },\r\n\r\n    // bug fix. EN - HR\r\n    bindCustomSelect() {\r\n        const custom = document.querySelector(SELECTORS.CUSTOM);\r\n        const selected = document.querySelector(SELECTORS.SELECTED);\r\n        const text = document.querySelector(SELECTORS.TEXT);\r\n        const options = document.querySelectorAll(SELECTORS.OPTIONS);\r\n\r\n        if (!custom || !selected) {\r\n            console.warn('No language switcher found');\r\n            return;\r\n        }\r\n\r\n        const currentLang = localStorage.getItem(STORAGE_KEY) || 'en';\r\n        this.setSelectedLanguage(text, options, currentLang);\r\n\r\n        selected.addEventListener('click', (e) => {\r\n            e.stopPropagation();\r\n            this.toggleDropdown(custom);\r\n        });\r\n\r\n        options.forEach(option => {\r\n            option.addEventListener('click', () => {\r\n                this.handleOptionClick(option, text, options, custom);\r\n            });\r\n        });\r\n\r\n        document.addEventListener('click', () => {\r\n            this.closeDropdown(custom);\r\n        });\r\n    },\r\n\r\n    async init() {\r\n        try {\r\n            const savedLang = await this.getLanguage();\r\n            const redirected = this.redirectIfNeeded(savedLang);\r\n\r\n            if (!redirected) {\r\n                this.bindCustomSelect();\r\n            }\r\n        } catch (error) {\r\n            console.error('LanguageSwitcher initialization failed:', error);\r\n            this.bindCustomSelect();\r\n        }\r\n    }\r\n};","import {ScreenManager} from \"./modules/ScreenManager\";\r\nimport {FormsManager} from \"./modules/FormsManager\";\r\nimport {NichesAccordion} from \"./modules/NichesAccordion\";\r\nimport {AppState} from \"./modules/AppState\";\r\nimport {LanguageSwitcher} from \"./modules/LanguageSwitcher\";\r\n\r\nfunction main() {\r\n  AppState.init()\r\n  LanguageSwitcher.init()\r\n  ScreenManager.init();\r\n  FormsManager.init();\r\n  NichesAccordion.init();\r\n}\r\n\r\nmain();\r\n\r\n// if (document.documentElement.clientWidth < 480) {\r\n//   window.addEventListener('scroll',\r\n//     function () {\r\n//       return setTimeout(main, 1000);\r\n//     }, {\r\n//       once: true\r\n//     });\r\n// } else {\r\n//   main();\r\n// }\r\n"],"names":["SELECTORS","SCREEN","VISIBLE_SCREEN","NAVIGATION_BUTTON","CSS_CLASSES","HIDDEN","SCREEN_EXIT","SCREEN_ENTER","TRANSITION_DURATION","ScreenManager","goToScreen","screenId","screens","document","querySelectorAll","targetScreen","getElementById","console","error","currentScreen","querySelector","classList","add","setTimeout","forEach","screen","remove","bindButtons","buttons","length","warn","button","addEventListener","dataset","init","SUBSCRIBE_PAGE","CALL_FORM","PROMO_CODE_FORM","PROMO_CODE_INPUT","PROMO_CODE_BUTTON","ORDER_FORM","redirectTypes","CALL_REQUEST","ORDER","CallRequestForm","callRequestForm","e","preventDefault","window","location","href","origin","PromoCodeForm","promoCodeForm","promoCodeInput","promoCodeButton","disabled","value","trim","target","OrderForm","orderForm","FormsManager","PROBLEMS_SCREEN","ACCORDION_CONTAINER","ACCORDION_ITEMS","ACCORDION_HEADER","ACCORDION_CONTENT","RADIO_INPUT","NEXT_BUTTON","ACTIVE","NichesAccordion","nextButton","handleAccordionClick","clickedItem","allItems","item","handleClick","event","accordionItem","closest","radioInput","checked","problemsScreen","accordionItems","AppState","storageKey","state","_loadState","_initializeState","now","Date","initialState","userId","_generateUserId","createdAt","_formatLocalDate","createdAtInKyiv","_formatKyivDate","updatedAt","updatedAtInKyiv","data","_saveToStorage","Math","random","toString","substring","timestamp","date","_formatToCustomString","timeZone","options","year","month","day","hour","minute","second","hour12","formatted","Intl","DateTimeFormat","format","replace","stored","localStorage","getItem","JSON","parse","setItem","stringify","set","key","get","getAll","getUserId","getCreatedAt","getUpdatedAt","clear","CUSTOM","SELECTED","TEXT","OPTIONS","STORAGE_KEY","COUNTRY_MAP","HR","SI","LANGUAGE_MAP","hr","sl","API_URL","LanguageSwitcher","detectUserLanguage","response","fetch","json","countryCode","country_code","browserLang","navigator","language","split","getLanguage","savedLang","redirectIfNeeded","currentPath","pathname","isSubscribePage","includes","queryParams","search","toggleDropdown","custom","toggle","closeDropdown","setSelectedLanguage","text","currentLang","currentOption","Array","from","find","opt","code","textContent","handleOptionClick","option","bindCustomSelect","selected","stopPropagation","redirected","main"],"mappings":";;;IAAA,MAAMA,SAAS,GAAG;IACdC,EAAAA,MAAM,EAAE,SADM;IAEdC,EAAAA,cAAc,EAAE,sBAFF;IAGdC,EAAAA,iBAAiB,EAAE;IAHL,CAAlB;IAMA,MAAMC,WAAW,GAAG;IAChBC,EAAAA,MAAM,EAAE,QADQ;IAEhBC,EAAAA,WAAW,EAAE,aAFG;IAGhBC,EAAAA,YAAY,EAAE;IAHE,CAApB;IAMA,MAAMC,mBAAmB,GAAG,GAA5B;;IAEO,MAAMC,aAAa,GAAG;IACzBC,EAAAA,UAAU,CAACC,QAAD,EAAW;IACjB,UAAMC,OAAO,GAAGC,QAAQ,CAACC,gBAAT,CAA0Bd,SAAS,CAACC,MAApC,CAAhB;IACA,UAAMc,YAAY,GAAGF,QAAQ,CAACG,cAAT,CAAwBL,QAAxB,CAArB;;IAEA,QAAI,CAACI,YAAL,EAAmB;IACfE,MAAAA,OAAO,CAACC,KAAR,CAAe,mBAAkBP,QAAS,cAA1C;IACA;IACH;;IAED,UAAMQ,aAAa,GAAGN,QAAQ,CAACO,aAAT,CAAuBpB,SAAS,CAACE,cAAjC,CAAtB;;IAEA,QAAIiB,aAAJ,EAAmB;IACfA,MAAAA,aAAa,CAACE,SAAd,CAAwBC,GAAxB,CAA4BlB,WAAW,CAACE,WAAxC;IAEAiB,MAAAA,UAAU,CAAC,MAAM;IACbX,QAAAA,OAAO,CAACY,OAAR,CAAgBC,MAAM,IAAI;IACtBA,UAAAA,MAAM,CAACJ,SAAP,CAAiBC,GAAjB,CAAqBlB,WAAW,CAACC,MAAjC;IACAoB,UAAAA,MAAM,CAACJ,SAAP,CAAiBK,MAAjB,CAAwBtB,WAAW,CAACE,WAApC,EAAiDF,WAAW,CAACG,YAA7D;IACH,SAHD;IAKAQ,QAAAA,YAAY,CAACM,SAAb,CAAuBK,MAAvB,CAA8BtB,WAAW,CAACC,MAA1C;IACAU,QAAAA,YAAY,CAACM,SAAb,CAAuBC,GAAvB,CAA2BlB,WAAW,CAACG,YAAvC;IACH,OARS,EAQPC,mBARO,CAAV;IASH,KAZD,MAYO;IACHO,MAAAA,YAAY,CAACM,SAAb,CAAuBK,MAAvB,CAA8BtB,WAAW,CAACC,MAA1C;IACH;IACJ,GA3BwB;;IA6BzBsB,EAAAA,WAAW,GAAG;IACV,UAAMC,OAAO,GAAGf,QAAQ,CAACC,gBAAT,CAA0Bd,SAAS,CAACG,iBAApC,CAAhB;;IAEA,QAAIyB,OAAO,CAACC,MAAR,KAAmB,CAAvB,EAA0B;IACtBZ,MAAAA,OAAO,CAACa,IAAR,CAAa,6BAAb;IACA;IACH;;IAEDF,IAAAA,OAAO,CAACJ,OAAR,CAAgBO,MAAM,IAAI;IACtBA,MAAAA,MAAM,CAACC,gBAAP,CAAwB,OAAxB,EAAiC,MAAM;IACnC,cAAMjB,YAAY,GAAGgB,MAAM,CAACE,OAAP,CAAelB,YAApC;IACA,aAAKL,UAAL,CAAgBK,YAAhB;IACH,OAHD;IAIH,KALD;IAMH,GA3CwB;;IA6CzBmB,EAAAA,IAAI,GAAG;IACH,SAAKP,WAAL;IACH;;IA/CwB,CAAtB;;ICdP,MAAMQ,cAAc,GAAG,gBAAvB;IAEA,MAAMnC,WAAS,GAAG;IACdoC,EAAAA,SAAS,EAAE,oBADG;IAEdC,EAAAA,eAAe,EAAE,sBAFH;IAGdC,EAAAA,gBAAgB,EAAE,qBAHJ;IAIdC,EAAAA,iBAAiB,EAAE,wBAJL;IAKdC,EAAAA,UAAU,EAAE;IALE,CAAlB;IAQA,MAAMC,aAAa,GAAG;IAClBC,EAAAA,YAAY,EAAE,cADI;IAElBC,EAAAA,KAAK,EAAE;IAFW,CAAtB;IAKA,MAAMC,eAAe,GAAG;IACpBV,EAAAA,IAAI,GAAG;IACH,UAAMW,eAAe,GAAGhC,QAAQ,CAACO,aAAT,CAAuBpB,WAAS,CAACoC,SAAjC,CAAxB;;IAEA,QAAI,CAACS,eAAL,EAAsB;IAClB5B,MAAAA,OAAO,CAACa,IAAR,CAAa,6BAAb;IACA;IACH;;IAEDe,IAAAA,eAAe,CAACb,gBAAhB,CAAiC,QAAjC,EAA2Cc,CAAC,IAAI;IAC5CA,MAAAA,CAAC,CAACC,cAAF;IACAC,MAAAA,MAAM,CAACC,QAAP,CAAgBC,IAAhB,GAAwB,GAAEF,MAAM,CAACC,QAAP,CAAgBE,MAAO,IAAGhB,cAAe,aAAYM,aAAa,CAACC,YAAa,EAA1G;IACH,KAHD;IAIH;;IAbmB,CAAxB;IAgBA,MAAMU,aAAa,GAAG;IAClBlB,EAAAA,IAAI,GAAG;IACH,UAAMmB,aAAa,GAAGxC,QAAQ,CAACO,aAAT,CAAuBpB,WAAS,CAACqC,eAAjC,CAAtB;;IAEA,QAAI,CAACgB,aAAL,EAAoB;IAChBpC,MAAAA,OAAO,CAACa,IAAR,CAAa,0BAAb;IACA;IACH;;IAED,UAAMwB,cAAc,GAAGD,aAAa,CAACjC,aAAd,CAA4BpB,WAAS,CAACsC,gBAAtC,CAAvB;IACA,UAAMiB,eAAe,GAAGF,aAAa,CAACjC,aAAd,CAA4BpB,WAAS,CAACuC,iBAAtC,CAAxB;;IAEA,QAAI,CAACe,cAAD,IAAmB,CAACC,eAAxB,EAAyC;IACrCtC,MAAAA,OAAO,CAACa,IAAR,CAAa,qCAAb;IACA;IACH;;IAEDyB,IAAAA,eAAe,CAACC,QAAhB,GAA2BF,cAAc,CAACG,KAAf,CAAqBC,IAArB,OAAgC,EAA3D;IAEAL,IAAAA,aAAa,CAACrB,gBAAd,CAA+B,QAA/B,EAAyCc,CAAC,IAAI;IAC1CA,MAAAA,CAAC,CAACC,cAAF;IACH,KAFD;IAIAO,IAAAA,cAAc,CAACtB,gBAAf,CAAgC,OAAhC,EAAyCc,CAAC,IAAI;IAC3CS,MAAAA,eAAe,CAACC,QAAhB,GAA2BV,CAAC,CAACa,MAAF,CAASF,KAAT,CAAeC,IAAf,OAA0B,EAArD;IACF,KAFD;IAGH;;IA1BiB,CAAtB;IA6BA,MAAME,SAAS,GAAG;IACd1B,EAAAA,IAAI,GAAG;IACH,UAAM2B,SAAS,GAAGhD,QAAQ,CAACO,aAAT,CAAuBpB,WAAS,CAACwC,UAAjC,CAAlB;;IAEA,QAAI,CAACqB,SAAL,EAAgB;IACZ5C,MAAAA,OAAO,CAACa,IAAR,CAAa,sBAAb;IACA;IACH;;IAED+B,IAAAA,SAAS,CAAC7B,gBAAV,CAA2B,QAA3B,EAAqCc,CAAC,IAAI;IACtCA,MAAAA,CAAC,CAACC,cAAF;IACAC,MAAAA,MAAM,CAACC,QAAP,CAAgBC,IAAhB,GAAwB,GAAEF,MAAM,CAACC,QAAP,CAAgBE,MAAO,IAAGhB,cAAe,aAAYM,aAAa,CAACE,KAAM,EAAnG;IACH,KAHD;IAIH;;IAba,CAAlB;AAgBA,IAAO,MAAMmB,YAAY,GAAG;IACxB5B,EAAAA,IAAI,GAAG;IACHU,IAAAA,eAAe,CAACV,IAAhB;IACAkB,IAAAA,aAAa,CAAClB,IAAd;IACA0B,IAAAA,SAAS,CAAC1B,IAAV;IACH;;IALuB,CAArB;;IC5EP,MAAMlC,WAAS,GAAG;IACd+D,EAAAA,eAAe,EAAE,kBADH;IAEdC,EAAAA,mBAAmB,EAAE,mBAFP;IAGdC,EAAAA,eAAe,EAAE,iBAHH;IAIdC,EAAAA,gBAAgB,EAAE,mBAJJ;IAKdC,EAAAA,iBAAiB,EAAE,oBALL;IAMdC,EAAAA,WAAW,EAAE,qBANC;IAOdC,EAAAA,WAAW,EAAE;IAPC,CAAlB;IAUA,MAAMjE,aAAW,GAAG;IAChBkE,EAAAA,MAAM,EAAE;IADQ,CAApB;AAIA,IAAO,MAAMC,eAAe,GAAG;IAC3BC,EAAAA,UAAU,EAAE,IADe;;IAG3BC,EAAAA,oBAAoB,CAACC,WAAD,EAAcC,QAAd,EAAwB;IACxCA,IAAAA,QAAQ,CAACnD,OAAT,CAAiBoD,IAAI,IAAIA,IAAI,CAACvD,SAAL,CAAeK,MAAf,CAAsBtB,aAAW,CAACkE,MAAlC,CAAzB;IACAI,IAAAA,WAAW,CAACrD,SAAZ,CAAsBC,GAAtB,CAA0BlB,aAAW,CAACkE,MAAtC;IACH,GAN0B;;IAQ3BO,EAAAA,WAAW,CAACC,KAAD,EAAQH,QAAR,EAAkB;IACzB,UAAMI,aAAa,GAAGD,KAAK,CAACnB,MAAN,CAAaqB,OAAb,CAAqBhF,WAAS,CAACiE,eAA/B,CAAtB;IACA,UAAMgB,UAAU,GAAGF,aAAa,EAAE3D,aAAf,CAA6BpB,WAAS,CAACoE,WAAvC,CAAnB;IAEA,QAAI,CAACW,aAAD,IAAkB,CAACE,UAAnB,IAAiCH,KAAK,CAACnB,MAAN,KAAiBsB,UAAtD,EAAkE;IAElEA,IAAAA,UAAU,CAACC,OAAX,GAAqB,IAArB;IACA,SAAKT,oBAAL,CAA0BM,aAA1B,EAAyCJ,QAAzC;IACH,GAhB0B;;IAkB3BzC,EAAAA,IAAI,GAAG;IACH,UAAMiD,cAAc,GAAGtE,QAAQ,CAACO,aAAT,CAAuBpB,WAAS,CAAC+D,eAAjC,CAAvB;IACA,QAAI,CAACoB,cAAL,EAAqB,OAAOlE,OAAO,CAACa,IAAR,CAAa,2BAAb,CAAP;IAErB,UAAMsD,cAAc,GAAGD,cAAc,CAACrE,gBAAf,CAAgCd,WAAS,CAACiE,eAA1C,CAAvB;;IAEA,QAAI,CAACmB,cAAc,CAACvD,MAApB,EAA4B;IACxB,aAAOZ,OAAO,CAACa,IAAR,CAAa,0CAAb,CAAP;IACH;;IAEDqD,IAAAA,cAAc,CAAC/D,aAAf,CAA6BpB,WAAS,CAACgE,mBAAvC,GACMhC,gBADN,CACuB,OADvB,EACiCc,CAAD,IAAO,KAAK+B,WAAL,CAAiB/B,CAAjB,EAAoBsC,cAApB,CADvC;IAEH;;IA9B0B,CAAxB;;ICdA,MAAMC,QAAQ,GAAG;IACpBC,EAAAA,UAAU,EAAE,UADQ;IAEpBC,EAAAA,KAAK,EAAE,IAFa;;IAIpBrD,EAAAA,IAAI,GAAG;IACH,SAAKqD,KAAL,GAAa,KAAKC,UAAL,MAAqB,KAAKC,gBAAL,EAAlC;IACH,GANmB;;IAQpBA,EAAAA,gBAAgB,GAAG;IACf,UAAMC,GAAG,GAAGC,IAAI,CAACD,GAAL,EAAZ;IACA,UAAME,YAAY,GAAG;IACjBC,MAAAA,MAAM,EAAE,KAAKC,eAAL,EADS;IAEjBC,MAAAA,SAAS,EAAE,KAAKC,gBAAL,CAAsBN,GAAtB,CAFM;IAGjBO,MAAAA,eAAe,EAAE,KAAKC,eAAL,CAAqBR,GAArB,CAHA;IAIjBS,MAAAA,SAAS,EAAE,KAAKH,gBAAL,CAAsBN,GAAtB,CAJM;IAKjBU,MAAAA,eAAe,EAAE,KAAKF,eAAL,CAAqBR,GAArB,CALA;IAMjBW,MAAAA,IAAI,EAAE;IANW,KAArB;;IAQA,SAAKC,cAAL,CAAoBV,YAApB;;IACA,WAAOA,YAAP;IACH,GApBmB;;IAsBpBE,EAAAA,eAAe,GAAG;IACd,WAAOS,IAAI,CAACC,MAAL,GAAcC,QAAd,CAAuB,EAAvB,EAA2BC,SAA3B,CAAqC,CAArC,EAAwC,CAAxC,CAAP;IACH,GAxBmB;;IA0BpBV,EAAAA,gBAAgB,CAACW,SAAD,EAAY;IACxB,UAAMC,IAAI,GAAG,IAAIjB,IAAJ,CAASgB,SAAT,CAAb;IACA,WAAO,KAAKE,qBAAL,CAA2BD,IAA3B,CAAP;IACH,GA7BmB;;IA+BpBV,EAAAA,eAAe,CAACS,SAAD,EAAY;IACvB,UAAMC,IAAI,GAAG,IAAIjB,IAAJ,CAASgB,SAAT,CAAb;IACA,WAAO,KAAKE,qBAAL,CAA2BD,IAA3B,EAAiC,aAAjC,CAAP;IACH,GAlCmB;;IAoCpBC,EAAAA,qBAAqB,CAACD,IAAD,EAAOE,QAAP,EAAiB;IAClC,UAAMC,OAAO,GAAG;IACZC,MAAAA,IAAI,EAAE,SADM;IAEZC,MAAAA,KAAK,EAAE,SAFK;IAGZC,MAAAA,GAAG,EAAE,SAHO;IAIZC,MAAAA,IAAI,EAAE,SAJM;IAKZC,MAAAA,MAAM,EAAE,SALI;IAMZC,MAAAA,MAAM,EAAE,SANI;IAOZC,MAAAA,MAAM,EAAE;IAPI,KAAhB;;IAUA,QAAIR,QAAJ,EAAc;IACVC,MAAAA,OAAO,CAACD,QAAR,GAAmBA,QAAnB;IACH;;IAED,UAAMS,SAAS,GAAG,IAAIC,IAAI,CAACC,cAAT,CAAwB,OAAxB,EAAiCV,OAAjC,EAA0CW,MAA1C,CAAiDd,IAAjD,CAAlB;IACA,WAAOW,SAAS,CAACI,OAAV,CAAkB,KAAlB,EAAyB,GAAzB,EAA8BA,OAA9B,CAAsC,GAAtC,EAA2C,GAA3C,CAAP;IACH,GArDmB;;IAuDpBnC,EAAAA,UAAU,GAAG;IACT,QAAI;IACA,YAAMoC,MAAM,GAAGC,YAAY,CAACC,OAAb,CAAqB,KAAKxC,UAA1B,CAAf;IACA,aAAOsC,MAAM,GAAGG,IAAI,CAACC,KAAL,CAAWJ,MAAX,CAAH,GAAwB,IAArC;IACH,KAHD,CAGE,OAAO1G,KAAP,EAAc;IACZD,MAAAA,OAAO,CAACC,KAAR,CAAc,uBAAd,EAAuCA,KAAvC;IACA,aAAO,IAAP;IACH;IACJ,GA/DmB;;IAiEpBoF,EAAAA,cAAc,CAACf,KAAD,EAAQ;IAClB,QAAI;IACAsC,MAAAA,YAAY,CAACI,OAAb,CAAqB,KAAK3C,UAA1B,EAAsCyC,IAAI,CAACG,SAAL,CAAe3C,KAAf,CAAtC;IACH,KAFD,CAEE,OAAOrE,KAAP,EAAc;IACZD,MAAAA,OAAO,CAACC,KAAR,CAAc,uBAAd,EAAuCA,KAAvC;IACH;IACJ,GAvEmB;;IAyEpBiH,EAAAA,GAAG,CAACC,GAAD,EAAM3E,KAAN,EAAa;IACZ,SAAK8B,KAAL,CAAWc,IAAX,CAAgB+B,GAAhB,IAAuB3E,KAAvB;IACA,SAAK8B,KAAL,CAAWY,SAAX,GAAuB,KAAKH,gBAAL,CAAsBL,IAAI,CAACD,GAAL,EAAtB,CAAvB;IACA,SAAKH,KAAL,CAAWa,eAAX,GAA6B,KAAKF,eAAL,CAAqBP,IAAI,CAACD,GAAL,EAArB,CAA7B;;IACA,SAAKY,cAAL,CAAoB,KAAKf,KAAzB;IACH,GA9EmB;;IAgFpB8C,EAAAA,GAAG,CAACD,GAAD,EAAM;IACL,WAAO,KAAK7C,KAAL,CAAWc,IAAX,CAAgB+B,GAAhB,CAAP;IACH,GAlFmB;;IAoFpBE,EAAAA,MAAM,GAAG;IACL,WAAO,EAAE,GAAG,KAAK/C;IAAV,KAAP;IACH,GAtFmB;;IAwFpBgD,EAAAA,SAAS,GAAG;IACR,WAAO,KAAKhD,KAAL,CAAWM,MAAlB;IACH,GA1FmB;;IA4FpB2C,EAAAA,YAAY,GAAG;IACX,WAAO,KAAKjD,KAAL,CAAWQ,SAAlB;IACH,GA9FmB;;IAgGpB0C,EAAAA,YAAY,GAAG;IACX,WAAO,KAAKlD,KAAL,CAAWY,SAAlB;IACH,GAlGmB;;IAoGpBuC,EAAAA,KAAK,GAAG;IACJ,SAAKnD,KAAL,GAAa,KAAKE,gBAAL,EAAb;IACH;;IAtGmB,CAAjB;;ICAP,MAAMzF,WAAS,GAAG;IACd2I,EAAAA,MAAM,EAAE,wBADM;IAEdC,EAAAA,QAAQ,EAAE,0BAFI;IAGdC,EAAAA,IAAI,EAAE,sBAHQ;IAIdC,EAAAA,OAAO,EAAE;IAJK,CAAlB;IAOA,MAAM1I,aAAW,GAAG;IAChBkE,EAAAA,MAAM,EAAE,QADQ;IAEhBsE,EAAAA,QAAQ,EAAE;IAFM,CAApB;IAKA,MAAMG,WAAW,GAAG,UAApB;IACA,MAAM5G,gBAAc,GAAG,gBAAvB;IAEA,MAAM6G,WAAW,GAAG;IAChBC,EAAAA,EAAE,EAAE,IADY;IAEhBC,EAAAA,EAAE,EAAE;IAFY,CAApB;IAKA,MAAMC,YAAY,GAAG;IACjBC,EAAAA,EAAE,EAAE,IADa;IAEjBC,EAAAA,EAAE,EAAE;IAFa,CAArB;IAKA,MAAMC,OAAO,GAAG,wBAAhB;AAEA,IAAO,MAAMC,gBAAgB,GAAG;IAC5B,QAAMC,kBAAN,GAA2B;IACvB,QAAI;IACA,YAAMC,QAAQ,GAAG,MAAMC,KAAK,CAACJ,OAAD,CAA5B;IACA,YAAMjD,IAAI,GAAG,MAAMoD,QAAQ,CAACE,IAAT,EAAnB;IACA,YAAMC,WAAW,GAAGvD,IAAI,CAACwD,YAAzB;IAEA,aAAOb,WAAW,CAACY,WAAD,CAAX,IAA4B,EAAnC;IACH,KAND,CAME,OAAO1I,KAAP,EAAc;IACZD,MAAAA,OAAO,CAACa,IAAR,CAAa,oCAAb,EAAmDZ,KAAnD;IACA,YAAM4I,WAAW,GAAGC,SAAS,CAACC,QAAV,CAAmBC,KAAnB,CAAyB,GAAzB,EAA8B,CAA9B,CAApB;IACA,aAAOd,YAAY,CAACW,WAAD,CAAZ,IAA6B,EAApC;IACH;IACJ,GAb2B;;IAe5B,QAAMI,WAAN,GAAoB;IAChB,QAAIC,SAAS,GAAGtC,YAAY,CAACC,OAAb,CAAqBiB,WAArB,CAAhB;;IAEA,QAAIoB,SAAS,KAAK,IAAlB,EAAwB;IACpBA,MAAAA,SAAS,GAAG,MAAM,KAAKX,kBAAL,EAAlB;IACA3B,MAAAA,YAAY,CAACI,OAAb,CAAqBc,WAArB,EAAkCoB,SAAlC;IACH;;IAED,WAAOA,SAAP;IACH,GAxB2B;;IA0B5BC,EAAAA,gBAAgB,CAACD,SAAD,EAAY;IACxB,UAAME,WAAW,GAAGrH,MAAM,CAACC,QAAP,CAAgBqH,QAApC;IACA,UAAMC,eAAe,GAAGF,WAAW,CAACG,QAAZ,CAAqBrI,gBAArB,CAAxB;IACA,UAAMsI,WAAW,GAAGzH,MAAM,CAACC,QAAP,CAAgByH,MAApC;;IAEA,QAAIP,SAAS,IAAI,CAACE,WAAW,CAACG,QAAZ,CAAsB,IAAGL,SAAU,GAAnC,CAAlB,EAA0D;IACtDnH,MAAAA,MAAM,CAACC,QAAP,CAAgBC,IAAhB,GAAuBqH,eAAe,GAC/B,IAAGJ,SAAU,IAAGhI,gBAAe,GAAEsI,WAAY,EADd,GAE/B,IAAGN,SAAU,IAAGM,WAAY,EAFnC;IAGA,aAAO,IAAP;IACH;;IAED,WAAO,KAAP;IACH,GAvC2B;;IAyC5BE,EAAAA,cAAc,CAACC,MAAD,EAAS;IACnBA,IAAAA,MAAM,CAACvJ,SAAP,CAAiBwJ,MAAjB,CAAwBzK,aAAW,CAACkE,MAApC;IACH,GA3C2B;;IA6C5BwG,EAAAA,aAAa,CAACF,MAAD,EAAS;IAClBA,IAAAA,MAAM,CAACvJ,SAAP,CAAiBK,MAAjB,CAAwBtB,aAAW,CAACkE,MAApC;IACH,GA/C2B;;IAiD5ByG,EAAAA,mBAAmB,CAACC,IAAD,EAAOjE,OAAP,EAAgBkE,WAAhB,EAA6B;IAC5C,UAAMC,aAAa,GAAGC,KAAK,CAACC,IAAN,CAAWrE,OAAX,EAAoBsE,IAApB,CAAyBC,GAAG,IAAIA,GAAG,CAACrJ,OAAJ,CAAYsJ,IAAZ,KAAqBN,WAArD,CAAtB;IACAD,IAAAA,IAAI,CAACQ,WAAL,GAAmBN,aAAa,EAAEM,WAAf,IAA8B,IAAjD;IACAN,IAAAA,aAAa,EAAE7J,SAAf,CAAyBC,GAAzB,CAA6BlB,aAAW,CAACwI,QAAzC;IACH,GArD2B;;IAuD5B6C,EAAAA,iBAAiB,CAACC,MAAD,EAASV,IAAT,EAAejE,OAAf,EAAwB6D,MAAxB,EAAgC;IAC7C,UAAMnH,KAAK,GAAGiI,MAAM,CAACzJ,OAAP,CAAewB,KAA7B;IACA,UAAM8H,IAAI,GAAGG,MAAM,CAACzJ,OAAP,CAAesJ,IAA5B;IACA,UAAMd,WAAW,GAAGzH,MAAM,CAACC,QAAP,CAAgByH,MAApC;IAEAM,IAAAA,IAAI,CAACQ,WAAL,GAAmBE,MAAM,CAACF,WAA1B;IACAzE,IAAAA,OAAO,CAACvF,OAAR,CAAgB8J,GAAG,IAAIA,GAAG,CAACjK,SAAJ,CAAcK,MAAd,CAAqBtB,aAAW,CAACwI,QAAjC,CAAvB;IACA8C,IAAAA,MAAM,CAACrK,SAAP,CAAiBC,GAAjB,CAAqBlB,aAAW,CAACwI,QAAjC;IACA,SAAKkC,aAAL,CAAmBF,MAAnB;IAEA/C,IAAAA,YAAY,CAACI,OAAb,CAAqBc,WAArB,EAAkCwC,IAAI,KAAK,IAAT,GAAgB,EAAhB,GAAqBA,IAAvD;IACAvI,IAAAA,MAAM,CAACC,QAAP,CAAgBC,IAAhB,GAAuBO,KAAK,GAAGgH,WAA/B;IACH,GAnE2B;;IAqE5B;IACAkB,EAAAA,gBAAgB,GAAG;IACf,UAAMf,MAAM,GAAG/J,QAAQ,CAACO,aAAT,CAAuBpB,WAAS,CAAC2I,MAAjC,CAAf;IACA,UAAMiD,QAAQ,GAAG/K,QAAQ,CAACO,aAAT,CAAuBpB,WAAS,CAAC4I,QAAjC,CAAjB;IACA,UAAMoC,IAAI,GAAGnK,QAAQ,CAACO,aAAT,CAAuBpB,WAAS,CAAC6I,IAAjC,CAAb;IACA,UAAM9B,OAAO,GAAGlG,QAAQ,CAACC,gBAAT,CAA0Bd,WAAS,CAAC8I,OAApC,CAAhB;;IAEA,QAAI,CAAC8B,MAAD,IAAW,CAACgB,QAAhB,EAA0B;IACtB3K,MAAAA,OAAO,CAACa,IAAR,CAAa,4BAAb;IACA;IACH;;IAED,UAAMmJ,WAAW,GAAGpD,YAAY,CAACC,OAAb,CAAqBiB,WAArB,KAAqC,IAAzD;IACA,SAAKgC,mBAAL,CAAyBC,IAAzB,EAA+BjE,OAA/B,EAAwCkE,WAAxC;IAEAW,IAAAA,QAAQ,CAAC5J,gBAAT,CAA0B,OAA1B,EAAoCc,CAAD,IAAO;IACtCA,MAAAA,CAAC,CAAC+I,eAAF;IACA,WAAKlB,cAAL,CAAoBC,MAApB;IACH,KAHD;IAKA7D,IAAAA,OAAO,CAACvF,OAAR,CAAgBkK,MAAM,IAAI;IACtBA,MAAAA,MAAM,CAAC1J,gBAAP,CAAwB,OAAxB,EAAiC,MAAM;IACnC,aAAKyJ,iBAAL,CAAuBC,MAAvB,EAA+BV,IAA/B,EAAqCjE,OAArC,EAA8C6D,MAA9C;IACH,OAFD;IAGH,KAJD;IAMA/J,IAAAA,QAAQ,CAACmB,gBAAT,CAA0B,OAA1B,EAAmC,MAAM;IACrC,WAAK8I,aAAL,CAAmBF,MAAnB;IACH,KAFD;IAGH,GAlG2B;;IAoG5B,QAAM1I,IAAN,GAAa;IACT,QAAI;IACA,YAAMiI,SAAS,GAAG,MAAM,KAAKD,WAAL,EAAxB;IACA,YAAM4B,UAAU,GAAG,KAAK1B,gBAAL,CAAsBD,SAAtB,CAAnB;;IAEA,UAAI,CAAC2B,UAAL,EAAiB;IACb,aAAKH,gBAAL;IACH;IACJ,KAPD,CAOE,OAAOzK,KAAP,EAAc;IACZD,MAAAA,OAAO,CAACC,KAAR,CAAc,yCAAd,EAAyDA,KAAzD;IACA,WAAKyK,gBAAL;IACH;IACJ;;IAhH2B,CAAzB;;ICrBP,SAASI,IAAT,GAAgB;IACd1G,EAAAA,QAAQ,CAACnD,IAAT;IACAqH,EAAAA,gBAAgB,CAACrH,IAAjB;IACAzB,EAAAA,aAAa,CAACyB,IAAd;IACA4B,EAAAA,YAAY,CAAC5B,IAAb;IACAqC,EAAAA,eAAe,CAACrC,IAAhB;IACD;;IAED6J,IAAI;IAGJ;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;;;;"}