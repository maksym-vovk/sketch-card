{"version":3,"file":"main.js","sources":["../../src/js/modules/ScreenManager.js","../../src/js/modules/FormsManager.js","../../src/js/modules/NichesAccordion.js","../../src/js/modules/AppState.js","../../src/js/modules/LanguageSwitcher.js","../../src/js/main.js"],"sourcesContent":["const SELECTORS = {\n    SCREEN: '.screen',\n    VISIBLE_SCREEN: '.screen:not(.hidden)',\n    NAVIGATION_BUTTON: '[data-target-screen]'\n};\n\nconst CSS_CLASSES = {\n    HIDDEN: 'hidden',\n    SCREEN_EXIT: 'screen-exit',\n    SCREEN_ENTER: 'screen-enter'\n};\n\nconst TRANSITION_DURATION = 300; // Match CSS transition duration\n\nexport const ScreenManager = {\n    goToScreen(screenId) {\n        const screens = document.querySelectorAll(SELECTORS.SCREEN);\n        const targetScreen = document.getElementById(screenId);\n\n        if (!targetScreen) {\n            console.error(`Screen with ID \"${screenId}\" not found.`);\n            return;\n        }\n\n        const currentScreen = document.querySelector(SELECTORS.VISIBLE_SCREEN);\n\n        if (currentScreen) {\n            currentScreen.classList.add(CSS_CLASSES.SCREEN_EXIT);\n\n            setTimeout(() => {\n                screens.forEach(screen => {\n                    screen.classList.add(CSS_CLASSES.HIDDEN);\n                    screen.classList.remove(CSS_CLASSES.SCREEN_EXIT, CSS_CLASSES.SCREEN_ENTER);\n                });\n\n                targetScreen.classList.remove(CSS_CLASSES.HIDDEN);\n                targetScreen.classList.add(CSS_CLASSES.SCREEN_ENTER);\n            }, TRANSITION_DURATION);\n        } else {\n            targetScreen.classList.remove(CSS_CLASSES.HIDDEN);\n        }\n    },\n\n    bindButtons() {\n        const buttons = document.querySelectorAll(SELECTORS.NAVIGATION_BUTTON);\n\n        if (buttons.length === 0) {\n            console.warn('No navigation buttons found');\n            return;\n        }\n\n        buttons.forEach(button => {\n            button.addEventListener('click', () => {\n                const targetScreen = button.dataset.targetScreen;\n                this.goToScreen(targetScreen);\n            });\n        });\n    },\n\n    init() {\n        this.bindButtons();\n    }\n};\n","const SUBSCRIBE_PAGE = 'subscribe.html';\n\nconst SELECTORS = {\n    CALL_FORM: '.intro-popup__form',\n    PROMO_CODE_FORM: '.intro-success__form',\n    PROMO_CODE_INPUT: '[name=\"promo-code\"]',\n    PROMO_CODE_BUTTON: '.intro-success__submit',\n    ORDER_FORM: '.order__form',\n}\n\nconst redirectTypes = {\n    CALL_REQUEST: 'call_request',\n    ORDER: 'order'\n};\n\nconst CallRequestForm = {\n    init() {\n        const callRequestForm = document.querySelector(SELECTORS.CALL_FORM);\n\n        if (!callRequestForm) {\n            console.warn('Call request form not found');\n            return;\n        }\n\n        callRequestForm.addEventListener('submit', e => {\n            e.preventDefault();\n            window.location.href = `${window.location.origin}/${SUBSCRIBE_PAGE}?redirect=${redirectTypes.CALL_REQUEST}`;\n        });\n    }\n}\n\nconst PromoCodeForm = {\n    init() {\n        const promoCodeForm = document.querySelector(SELECTORS.PROMO_CODE_FORM);\n\n        if (!promoCodeForm) {\n            console.warn('Promocode form not found');\n            return;\n        }\n\n        const promoCodeInput = promoCodeForm.querySelector(SELECTORS.PROMO_CODE_INPUT);\n        const promoCodeButton = promoCodeForm.querySelector(SELECTORS.PROMO_CODE_BUTTON);\n\n        if (!promoCodeInput || !promoCodeButton) {\n            console.warn('Promocode input or button not found');\n            return;\n        }\n\n        promoCodeButton.disabled = promoCodeInput.value.trim() === '';\n\n        promoCodeForm.addEventListener('submit', e => {\n            e.preventDefault();\n        });\n\n        promoCodeInput.addEventListener('input', e => {\n           promoCodeButton.disabled = e.target.value.trim() === '';\n        });\n    }\n}\n\nconst OrderForm = {\n    init() {\n        const orderForm = document.querySelector(SELECTORS.ORDER_FORM);\n\n        if (!orderForm) {\n            console.warn('Order form not found');\n            return;\n        }\n\n        orderForm.addEventListener('submit', e => {\n            e.preventDefault();\n            window.location.href = `${window.location.origin}/${SUBSCRIBE_PAGE}?redirect=${redirectTypes.ORDER}`;\n        });\n    }\n}\n\nexport const FormsManager = {\n    init() {\n        CallRequestForm.init();\n        PromoCodeForm.init();\n        OrderForm.init();\n    }\n}","const SELECTORS = {\n    PROBLEMS_SCREEN: '#screen-problems',\n    ACCORDION_CONTAINER: '.problems-wrapper',\n    ACCORDION_ITEMS: '.accordion-item',\n    ACCORDION_HEADER: '.accordion-header',\n    ACCORDION_CONTENT: '.accordion-content',\n    RADIO_INPUT: 'input[type=\"radio\"]',\n    NEXT_BUTTON: '.problems__next'\n};\n\nconst CSS_CLASSES = {\n    ACTIVE: 'active'\n};\n\nexport const NichesAccordion = {\n    _handleAccordionClick(clickedItem, allItems) {\n        allItems.forEach(item => item.classList.remove(CSS_CLASSES.ACTIVE));\n        clickedItem.classList.add(CSS_CLASSES.ACTIVE);\n    },\n\n    _handleClick(event, allItems) {\n        const accordionItem = event.target.closest(SELECTORS.ACCORDION_ITEMS);\n        const radioInput = accordionItem?.querySelector(SELECTORS.RADIO_INPUT);\n\n        if (!accordionItem || !radioInput || event.target === radioInput) return;\n\n        radioInput.checked = true;\n        this._handleAccordionClick(accordionItem, allItems);\n    },\n\n    _setFirstItemActive(allItems) {\n        const firstItem = allItems[0];\n        const radioInput = firstItem?.querySelector(SELECTORS.RADIO_INPUT);\n\n        if (!radioInput) return;\n\n        radioInput.checked = true;\n        this._handleAccordionClick(firstItem, allItems);\n    },\n\n    init() {\n        const problemsScreen = document.querySelector(SELECTORS.PROBLEMS_SCREEN);\n        if (!problemsScreen) return console.warn('Problems screen not found');\n\n        const accordionContainer = problemsScreen.querySelector(SELECTORS.ACCORDION_CONTAINER);\n        const accordionItems = problemsScreen.querySelectorAll(SELECTORS.ACCORDION_ITEMS);\n        if (!accordionContainer) return console.warn('AccordionContainer not found');\n\n        this._setFirstItemActive(accordionItems);\n\n        problemsScreen.querySelector(SELECTORS.ACCORDION_CONTAINER)\n            ?.addEventListener('click', (e) => this._handleClick(e, accordionItems));\n    }\n};","export const AppState = {\n    storageKey: 'appState',\n    state: null,\n\n    init() {\n        this.state = this._loadState() || this._initializeState();\n    },\n\n    _initializeState() {\n        const now = Date.now();\n        const initialState = {\n            userId: this._generateUserId(),\n            createdAt: this._formatLocalDate(now),\n            createdAtInKyiv: this._formatKyivDate(now),\n            updatedAt: this._formatLocalDate(now),\n            updatedAtInKyiv: this._formatKyivDate(now),\n            data: {}\n        };\n        this._saveToStorage(initialState);\n        return initialState;\n    },\n\n    _generateUserId() {\n        return Math.random().toString(36).substring(2, 8);\n    },\n\n    _formatLocalDate(timestamp) {\n        const date = new Date(timestamp);\n        return this._formatToCustomString(date);\n    },\n\n    _formatKyivDate(timestamp) {\n        const date = new Date(timestamp);\n        return this._formatToCustomString(date, 'Europe/Kiev');\n    },\n\n    _formatToCustomString(date, timeZone) {\n        const options = {\n            year: 'numeric',\n            month: '2-digit',\n            day: '2-digit',\n            hour: '2-digit',\n            minute: '2-digit',\n            second: '2-digit',\n            hour12: false\n        };\n\n        if (timeZone) {\n            options.timeZone = timeZone;\n        }\n\n        const formatted = new Intl.DateTimeFormat('en-GB', options).format(date);\n        return formatted.replace(/\\//g, '.').replace(',', ',');\n    },\n\n    _loadState() {\n        try {\n            const stored = localStorage.getItem(this.storageKey);\n            return stored ? JSON.parse(stored) : null;\n        } catch (error) {\n            console.error('Failed to load state:', error);\n            return null;\n        }\n    },\n\n    _saveToStorage(state) {\n        try {\n            localStorage.setItem(this.storageKey, JSON.stringify(state));\n        } catch (error) {\n            console.error('Failed to save state:', error);\n        }\n    },\n\n    set(key, value) {\n        this.state.data[key] = value;\n        this.state.updatedAt = this._formatLocalDate(Date.now());\n        this.state.updatedAtInKyiv = this._formatKyivDate(Date.now())\n        this._saveToStorage(this.state);\n    },\n\n    get(key) {\n        return this.state.data[key];\n    },\n\n    getAll() {\n        return { ...this.state };\n    },\n\n    getUserId() {\n        return this.state.userId;\n    },\n\n    getCreatedAt() {\n        return this.state.createdAt;\n    },\n\n    getUpdatedAt() {\n        return this.state.updatedAt;\n    },\n\n    clear() {\n        this.state = this._initializeState();\n    }\n};","const SELECTORS = {\n    CUSTOM: '.lang-switcher__custom',\n    SELECTED: '.lang-switcher__selected',\n    TEXT: '.lang-switcher__text',\n    OPTIONS: '.lang-switcher__option'\n};\n\nconst CSS_CLASSES = {\n    ACTIVE: 'active',\n    SELECTED: 'selected'\n};\n\nconst STORAGE_KEY = 'language';\nconst SUBSCRIBE_PAGE = 'subscribe.html';\n\nconst COUNTRY_MAP = {\n    HR: 'hr',\n    SI: 'sl'\n};\n\nconst LANGUAGE_MAP = {\n    hr: 'hr',\n    sl: 'sl'\n};\n\nconst API_URL = 'https://ipapi.co/json/';\n\nexport const LanguageSwitcher = {\n    async detectUserLanguage() {\n        try {\n            const response = await fetch(API_URL);\n            const data = await response.json();\n            const countryCode = data.country_code;\n\n            return COUNTRY_MAP[countryCode] || '';\n        } catch (error) {\n            console.warn('Failed to detect language from IP:', error);\n            const browserLang = navigator.language.split('-')[0];\n            return LANGUAGE_MAP[browserLang] || '';\n        }\n    },\n\n    async getLanguage() {\n        let savedLang = localStorage.getItem(STORAGE_KEY);\n\n        if (savedLang === null) {\n            savedLang = await this.detectUserLanguage();\n            localStorage.setItem(STORAGE_KEY, savedLang);\n        }\n\n        return savedLang;\n    },\n\n    redirectIfNeeded(savedLang) {\n        const currentPath = window.location.pathname;\n        const isSubscribePage = currentPath.includes(SUBSCRIBE_PAGE);\n        const queryParams = window.location.search;\n\n        if (savedLang && !currentPath.includes(`/${savedLang}/`)) {\n            window.location.href = isSubscribePage\n                ? `/${savedLang}/${SUBSCRIBE_PAGE}${queryParams}`\n                : `/${savedLang}/${queryParams}`;\n            return true;\n        }\n\n        return false;\n    },\n\n    toggleDropdown(custom) {\n        custom.classList.toggle(CSS_CLASSES.ACTIVE);\n    },\n\n    closeDropdown(custom) {\n        custom.classList.remove(CSS_CLASSES.ACTIVE);\n    },\n\n    setSelectedLanguage(text, options, currentLang) {\n        const currentOption = Array.from(options).find(opt => opt.dataset.code === currentLang);\n        text.textContent = currentOption?.textContent || 'EN';\n        currentOption?.classList.add(CSS_CLASSES.SELECTED);\n    },\n\n    handleOptionClick(option, text, options, custom) {\n        const value = option.dataset.value;\n        const code = option.dataset.code;\n        const queryParams = window.location.search;\n\n        text.textContent = option.textContent;\n        options.forEach(opt => opt.classList.remove(CSS_CLASSES.SELECTED));\n        option.classList.add(CSS_CLASSES.SELECTED);\n        this.closeDropdown(custom);\n\n        localStorage.setItem(STORAGE_KEY, code === 'en' ? '' : code);\n        window.location.href = value + queryParams;\n    },\n\n    // bug fix. EN - HR\n    bindCustomSelect() {\n        const custom = document.querySelector(SELECTORS.CUSTOM);\n        const selected = document.querySelector(SELECTORS.SELECTED);\n        const text = document.querySelector(SELECTORS.TEXT);\n        const options = document.querySelectorAll(SELECTORS.OPTIONS);\n\n        if (!custom || !selected) {\n            console.warn('No language switcher found');\n            return;\n        }\n\n        const currentLang = localStorage.getItem(STORAGE_KEY) || 'en';\n        this.setSelectedLanguage(text, options, currentLang);\n\n        selected.addEventListener('click', (e) => {\n            e.stopPropagation();\n            this.toggleDropdown(custom);\n        });\n\n        options.forEach(option => {\n            option.addEventListener('click', () => {\n                this.handleOptionClick(option, text, options, custom);\n            });\n        });\n\n        document.addEventListener('click', () => {\n            this.closeDropdown(custom);\n        });\n    },\n\n    async init() {\n        try {\n            const savedLang = await this.getLanguage();\n            const redirected = this.redirectIfNeeded(savedLang);\n\n            if (!redirected) {\n                this.bindCustomSelect();\n            }\n        } catch (error) {\n            console.error('LanguageSwitcher initialization failed:', error);\n            this.bindCustomSelect();\n        }\n    }\n};","import {ScreenManager} from \"./modules/ScreenManager\";\nimport {FormsManager} from \"./modules/FormsManager\";\nimport {NichesAccordion} from \"./modules/NichesAccordion\";\nimport {AppState} from \"./modules/AppState\";\nimport {LanguageSwitcher} from \"./modules/LanguageSwitcher\";\n\nfunction main() {\n  AppState.init()\n  LanguageSwitcher.init()\n  ScreenManager.init();\n  FormsManager.init();\n  NichesAccordion.init();\n}\n\nmain();\n\n// if (document.documentElement.clientWidth < 480) {\n//   window.addEventListener('scroll',\n//     function () {\n//       return setTimeout(main, 1000);\n//     }, {\n//       once: true\n//     });\n// } else {\n//   main();\n// }\n"],"names":["SELECTORS","SCREEN","VISIBLE_SCREEN","NAVIGATION_BUTTON","CSS_CLASSES","HIDDEN","SCREEN_EXIT","SCREEN_ENTER","TRANSITION_DURATION","ScreenManager","goToScreen","screenId","screens","document","querySelectorAll","targetScreen","getElementById","console","error","currentScreen","querySelector","classList","add","setTimeout","forEach","screen","remove","bindButtons","buttons","length","warn","button","addEventListener","dataset","init","SUBSCRIBE_PAGE","CALL_FORM","PROMO_CODE_FORM","PROMO_CODE_INPUT","PROMO_CODE_BUTTON","ORDER_FORM","redirectTypes","CALL_REQUEST","ORDER","CallRequestForm","callRequestForm","e","preventDefault","window","location","href","origin","PromoCodeForm","promoCodeForm","promoCodeInput","promoCodeButton","disabled","value","trim","target","OrderForm","orderForm","FormsManager","PROBLEMS_SCREEN","ACCORDION_CONTAINER","ACCORDION_ITEMS","ACCORDION_HEADER","ACCORDION_CONTENT","RADIO_INPUT","NEXT_BUTTON","ACTIVE","NichesAccordion","_handleAccordionClick","clickedItem","allItems","item","_handleClick","event","accordionItem","closest","radioInput","checked","_setFirstItemActive","firstItem","problemsScreen","accordionContainer","accordionItems","AppState","storageKey","state","_loadState","_initializeState","now","Date","initialState","userId","_generateUserId","createdAt","_formatLocalDate","createdAtInKyiv","_formatKyivDate","updatedAt","updatedAtInKyiv","data","_saveToStorage","Math","random","toString","substring","timestamp","date","_formatToCustomString","timeZone","options","year","month","day","hour","minute","second","hour12","formatted","Intl","DateTimeFormat","format","replace","stored","localStorage","getItem","JSON","parse","setItem","stringify","set","key","get","getAll","getUserId","getCreatedAt","getUpdatedAt","clear","CUSTOM","SELECTED","TEXT","OPTIONS","STORAGE_KEY","COUNTRY_MAP","HR","SI","LANGUAGE_MAP","hr","sl","API_URL","LanguageSwitcher","detectUserLanguage","response","fetch","json","countryCode","country_code","browserLang","navigator","language","split","getLanguage","savedLang","redirectIfNeeded","currentPath","pathname","isSubscribePage","includes","queryParams","search","toggleDropdown","custom","toggle","closeDropdown","setSelectedLanguage","text","currentLang","currentOption","Array","from","find","opt","code","textContent","handleOptionClick","option","bindCustomSelect","selected","stopPropagation","redirected","main"],"mappings":"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"}