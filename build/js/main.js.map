{"version":3,"file":"main.js","sources":["../../src/js/modules/ScreenManager.js","../../src/js/modules/FormsManager.js","../../src/js/utils/dataConfigParser.js","../../src/js/modules/UniversalRenderer.js","../../src/js/modules/NichesAccordion.js","../../src/js/modules/AppState.js","../../src/js/modules/LanguageSwitcher.js","../../src/js/main.js"],"sourcesContent":["const SELECTORS = {\n    SCREEN: '.screen',\n    VISIBLE_SCREEN: '.screen:not(.hidden)',\n    NAVIGATION_BUTTON: '[data-target-screen]'\n};\n\nconst CSS_CLASSES = {\n    HIDDEN: 'hidden',\n    SCREEN_EXIT: 'screen-exit',\n    SCREEN_ENTER: 'screen-enter'\n};\n\nconst TRANSITION_DURATION = 300; // Match CSS transition duration\n\nexport const ScreenManager = {\n    goToScreen(screenId) {\n        const screens = document.querySelectorAll(SELECTORS.SCREEN);\n        const targetScreen = document.getElementById(screenId);\n\n        if (!targetScreen) {\n            console.error(`Screen with ID \"${screenId}\" not found.`);\n            return;\n        }\n\n        const currentScreen = document.querySelector(SELECTORS.VISIBLE_SCREEN);\n\n        if (currentScreen) {\n            currentScreen.classList.add(CSS_CLASSES.SCREEN_EXIT);\n\n            setTimeout(() => {\n                screens.forEach(screen => {\n                    screen.classList.add(CSS_CLASSES.HIDDEN);\n                    screen.classList.remove(CSS_CLASSES.SCREEN_EXIT, CSS_CLASSES.SCREEN_ENTER);\n                });\n\n                targetScreen.classList.remove(CSS_CLASSES.HIDDEN);\n                targetScreen.classList.add(CSS_CLASSES.SCREEN_ENTER);\n\n                window.scrollTo(0, 0);\n            }, TRANSITION_DURATION);\n        } else {\n            targetScreen.classList.remove(CSS_CLASSES.HIDDEN);\n            window.scrollTo(0, 0);\n        }\n    },\n\n    bindButtons() {\n        const buttons = document.querySelectorAll(SELECTORS.NAVIGATION_BUTTON);\n\n        if (buttons.length === 0) {\n            console.warn('No navigation buttons found');\n            return;\n        }\n\n        buttons.forEach(button => {\n            button.addEventListener('click', () => {\n                const targetScreen = button.dataset.targetScreen;\n                this.goToScreen(targetScreen);\n            });\n        });\n    },\n\n    init() {\n        this.bindButtons();\n    }\n};\n","const SUBSCRIBE_PAGE = 'subscribe.html';\n\nconst SELECTORS = {\n    CALL_FORM: '.intro-popup__form',\n    PROMO_CODE_FORM: '.intro-success__form',\n    PROMO_CODE_INPUT: '[name=\"promo-code\"]',\n    PROMO_CODE_BUTTON: '.intro-success__submit',\n    ORDER_FORM: '.order__form',\n}\n\nconst redirectTypes = {\n    CALL_REQUEST: 'call_request',\n    ORDER: 'order'\n};\n\nconst CallRequestForm = {\n    init() {\n        const callRequestForm = document.querySelector(SELECTORS.CALL_FORM);\n\n        if (!callRequestForm) {\n            console.warn('Call request form not found');\n            return;\n        }\n\n        callRequestForm.addEventListener('submit', e => {\n            e.preventDefault();\n            window.location.href = `${window.location.origin}/${SUBSCRIBE_PAGE}?redirect=${redirectTypes.CALL_REQUEST}`;\n        });\n    }\n}\n\nconst PromoCodeForm = {\n    init() {\n        const promoCodeForm = document.querySelector(SELECTORS.PROMO_CODE_FORM);\n\n        if (!promoCodeForm) {\n            console.warn('Promocode form not found');\n            return;\n        }\n\n        const promoCodeInput = promoCodeForm.querySelector(SELECTORS.PROMO_CODE_INPUT);\n        const promoCodeButton = promoCodeForm.querySelector(SELECTORS.PROMO_CODE_BUTTON);\n\n        if (!promoCodeInput || !promoCodeButton) {\n            console.warn('Promocode input or button not found');\n            return;\n        }\n\n        promoCodeButton.disabled = promoCodeInput.value.trim() === '';\n\n        promoCodeForm.addEventListener('submit', e => {\n            e.preventDefault();\n        });\n\n        promoCodeInput.addEventListener('input', e => {\n           promoCodeButton.disabled = e.target.value.trim() === '';\n        });\n    }\n}\n\nconst OrderForm = {\n    init() {\n        const orderForm = document.querySelector(SELECTORS.ORDER_FORM);\n\n        if (!orderForm) {\n            console.warn('Order form not found');\n            return;\n        }\n\n        orderForm.addEventListener('submit', e => {\n            e.preventDefault();\n            window.location.href = `${window.location.origin}/${SUBSCRIBE_PAGE}?redirect=${redirectTypes.ORDER}`;\n        });\n    }\n}\n\nexport const FormsManager = {\n    init() {\n        CallRequestForm.init();\n        PromoCodeForm.init();\n        OrderForm.init();\n    }\n}","export const dataConfigParser = (configSelector) => {\n    const configContainer = document.querySelector(configSelector);\n\n    if (!configContainer) {\n        console.warn(`Config container with selector \"${configSelector}\" not found.`);\n        return null;\n    }\n\n    return JSON.parse(configContainer.dataset.config);\n}","export const UniversalRenderer = {\n    basePath: document.documentElement.lang === 'en' ? '' : '../',\n\n    _createElement(config) {\n        const element = document.createElement(config.tag);\n\n        // Set class\n        if (config.className) {\n            element.className = config.className;\n        }\n\n        // Set text content\n        if (config.text) {\n            element.textContent = config.text;\n        }\n\n        // Set attributes\n        if (config.attributes) {\n            Object.entries(config.attributes).forEach(([key, value]) => {\n                // Handle image src with basePath\n                if (key === 'src' && !value.startsWith('http')) {\n                    element.setAttribute(key, this.basePath + value);\n                } else {\n                    element.setAttribute(key, value);\n                }\n            });\n        }\n\n        // Append children\n        if (config.children) {\n            config.children.forEach(childConfig => {\n                const child = this._createElement(childConfig);\n                element.appendChild(child);\n            });\n        }\n\n        return element;\n    },\n\n    _cleanRoot(root) {\n        root.replaceChildren();\n    },\n\n    render(rootSelector, elements) {\n        const root = document.querySelector(rootSelector);\n        const fragment = document.createDocumentFragment();\n\n        this._cleanRoot(root)\n\n        elements.forEach((element) => {\n            const createdElement = this._createElement(element);\n            fragment.appendChild(createdElement);\n\n        })\n\n        root.prepend(fragment);\n    }\n}","import {dataConfigParser} from \"../utils/dataConfigParser\";\nimport {UniversalRenderer} from \"./UniversalRenderer\";\n\nconst SELECTORS = {\n    PROBLEMS_SCREEN: '#screen-problems',\n    ACCORDION_CONTAINER: '.problems-wrapper',\n    ACCORDION_ITEMS: '.accordion-item',\n    ACCORDION_HEADER: '.accordion-header',\n    ACCORDION_CONTENT: '.accordion-content',\n    RADIO_INPUT: 'input[type=\"radio\"]',\n    NEXT_BUTTON: '.problems__next',\n    PRESENTATION_CONTENT: '.presentation-modal__content',\n    ORDER_FORM_CONTENT: '.order-card__content'\n};\n\nconst CSS_CLASSES = {\n    ACTIVE: 'active'\n};\n\nexport const NichesAccordion = {\n    presentationData: dataConfigParser(SELECTORS.PRESENTATION_CONTENT),\n    orderFormData: dataConfigParser(SELECTORS.ORDER_FORM_CONTENT),\n\n    _handleAccordionClick(clickedItem, allItems) {\n        allItems.forEach(item => item.classList.remove(CSS_CLASSES.ACTIVE));\n        clickedItem.classList.add(CSS_CLASSES.ACTIVE);\n    },\n\n    _handleClick(event, allItems) {\n        const accordionItem = event.target.closest(SELECTORS.ACCORDION_ITEMS);\n        const radioInput = accordionItem?.querySelector(SELECTORS.RADIO_INPUT);\n        const niche = accordionItem.dataset.niche\n\n        if (!accordionItem || !radioInput || event.target === radioInput) return;\n\n        radioInput.checked = true;\n        this._handleAccordionClick(accordionItem, allItems);\n\n        UniversalRenderer.render(\n            SELECTORS.PRESENTATION_CONTENT,\n            this.presentationData[niche].elements\n        )\n\n        UniversalRenderer.render(\n            SELECTORS.ORDER_FORM_CONTENT,\n            this.orderFormData[niche].elements\n        )\n    },\n\n    _setFirstItemActive(allItems) {\n        const firstItem = allItems[0];\n        const radioInput = firstItem?.querySelector(SELECTORS.RADIO_INPUT);\n        const niche = firstItem.dataset.niche\n\n        if (!firstItem || !radioInput) return;\n\n        radioInput.checked = true;\n        this._handleAccordionClick(firstItem, allItems);\n\n        UniversalRenderer.render(\n            SELECTORS.PRESENTATION_CONTENT,\n            this.presentationData[niche].elements\n        )\n\n        UniversalRenderer.render(\n            SELECTORS.ORDER_FORM_CONTENT,\n            this.orderFormData[niche].elements\n        )\n    },\n\n    init() {\n        const problemsScreen = document.querySelector(SELECTORS.PROBLEMS_SCREEN);\n        if (!problemsScreen) return console.warn('Problems screen not found');\n\n        const accordionContainer = problemsScreen.querySelector(SELECTORS.ACCORDION_CONTAINER);\n        const accordionItems = problemsScreen.querySelectorAll(SELECTORS.ACCORDION_ITEMS);\n        if (!accordionContainer) return console.warn('AccordionContainer not found');\n\n        this._setFirstItemActive(accordionItems);\n\n        problemsScreen.querySelector(SELECTORS.ACCORDION_CONTAINER)\n            ?.addEventListener('click', (e) => this._handleClick(e, accordionItems));\n    }\n};","export const AppState = {\n    storageKey: 'appState',\n    state: null,\n\n    init() {\n        this.state = this._loadState() || this._initializeState();\n    },\n\n    _initializeState() {\n        const now = Date.now();\n        const initialState = {\n            userId: this._generateUserId(),\n            createdAt: this._formatLocalDate(now),\n            createdAtInKyiv: this._formatKyivDate(now),\n            updatedAt: this._formatLocalDate(now),\n            updatedAtInKyiv: this._formatKyivDate(now),\n            data: {}\n        };\n        this._saveToStorage(initialState);\n        return initialState;\n    },\n\n    _generateUserId() {\n        return Math.random().toString(36).substring(2, 8);\n    },\n\n    _formatLocalDate(timestamp) {\n        const date = new Date(timestamp);\n        return this._formatToCustomString(date);\n    },\n\n    _formatKyivDate(timestamp) {\n        const date = new Date(timestamp);\n        return this._formatToCustomString(date, 'Europe/Kiev');\n    },\n\n    _formatToCustomString(date, timeZone) {\n        const options = {\n            year: 'numeric',\n            month: '2-digit',\n            day: '2-digit',\n            hour: '2-digit',\n            minute: '2-digit',\n            second: '2-digit',\n            hour12: false\n        };\n\n        if (timeZone) {\n            options.timeZone = timeZone;\n        }\n\n        const formatted = new Intl.DateTimeFormat('en-GB', options).format(date);\n        return formatted.replace(/\\//g, '.').replace(',', ',');\n    },\n\n    _loadState() {\n        try {\n            const stored = localStorage.getItem(this.storageKey);\n            return stored ? JSON.parse(stored) : null;\n        } catch (error) {\n            console.error('Failed to load state:', error);\n            return null;\n        }\n    },\n\n    _saveToStorage(state) {\n        try {\n            localStorage.setItem(this.storageKey, JSON.stringify(state));\n        } catch (error) {\n            console.error('Failed to save state:', error);\n        }\n    },\n\n    set(key, value) {\n        this.state.data[key] = value;\n        this.state.updatedAt = this._formatLocalDate(Date.now());\n        this.state.updatedAtInKyiv = this._formatKyivDate(Date.now())\n        this._saveToStorage(this.state);\n    },\n\n    get(key) {\n        return this.state.data[key];\n    },\n\n    getAll() {\n        return { ...this.state };\n    },\n\n    getUserId() {\n        return this.state.userId;\n    },\n\n    getCreatedAt() {\n        return this.state.createdAt;\n    },\n\n    getUpdatedAt() {\n        return this.state.updatedAt;\n    },\n\n    clear() {\n        this.state = this._initializeState();\n    }\n};","const SELECTORS = {\n    CUSTOM: '.lang-switcher__custom',\n    SELECTED: '.lang-switcher__selected',\n    TEXT: '.lang-switcher__text',\n    OPTIONS: '.lang-switcher__option'\n};\n\nconst CSS_CLASSES = {\n    ACTIVE: 'active',\n    SELECTED: 'selected'\n};\n\nconst STORAGE_KEY = 'language';\nconst SUBSCRIBE_PAGE = 'subscribe.html';\n\nconst COUNTRY_MAP = {\n    HR: 'hr',\n    SI: 'sl'\n};\n\nconst LANGUAGE_MAP = {\n    hr: 'hr',\n    sl: 'sl'\n};\n\nconst API_URL = 'https://ipapi.co/json/';\n\nexport const LanguageSwitcher = {\n    async detectUserLanguage() {\n        try {\n            const controller = new AbortController();\n            setTimeout(() => controller.abort(), 500);\n\n            const response = await fetch(API_URL, { signal: controller.signal });\n            const data = await response.json();\n            return COUNTRY_MAP[data.country_code] || '';\n        } catch (error) {\n            console.warn('Failed to detect language from IP:', error);\n            const browserLang = navigator.language.split('-')[0];\n            return LANGUAGE_MAP[browserLang] || '';\n        }\n    },\n\n    async getLanguage() {\n        let savedLang = localStorage.getItem(STORAGE_KEY);\n\n        if (savedLang === null) {\n            savedLang = await this.detectUserLanguage();\n            localStorage.setItem(STORAGE_KEY, savedLang);\n        }\n\n        return savedLang;\n    },\n\n    redirectIfNeeded(savedLang) {\n        const currentPath = window.location.pathname;\n        const isSubscribePage = currentPath.includes(SUBSCRIBE_PAGE);\n        const queryParams = window.location.search;\n\n        if (savedLang && !currentPath.includes(`/${savedLang}/`)) {\n            window.location.href = isSubscribePage\n                ? `/${savedLang}/${SUBSCRIBE_PAGE}${queryParams}`\n                : `/${savedLang}/${queryParams}`;\n            return true;\n        }\n\n        return false;\n    },\n\n    toggleDropdown(custom) {\n        custom.classList.toggle(CSS_CLASSES.ACTIVE);\n    },\n\n    closeDropdown(custom) {\n        custom.classList.remove(CSS_CLASSES.ACTIVE);\n    },\n\n    setSelectedLanguage(text, options, currentLang) {\n        const currentOption = Array.from(options).find(opt => opt.dataset.code === currentLang);\n        text.textContent = currentOption?.textContent || 'EN';\n        currentOption?.classList.add(CSS_CLASSES.SELECTED);\n    },\n\n    handleOptionClick(option, text, options, custom) {\n        const value = option.dataset.value;\n        const code = option.dataset.code;\n        const queryParams = window.location.search;\n\n        text.textContent = option.textContent;\n        options.forEach(opt => opt.classList.remove(CSS_CLASSES.SELECTED));\n        option.classList.add(CSS_CLASSES.SELECTED);\n        this.closeDropdown(custom);\n\n        localStorage.setItem(STORAGE_KEY, code === 'en' ? '' : code);\n        window.location.href = value + queryParams;\n    },\n\n    // bug fix. EN - HR\n    bindCustomSelect() {\n        const custom = document.querySelector(SELECTORS.CUSTOM);\n        const selected = document.querySelector(SELECTORS.SELECTED);\n        const text = document.querySelector(SELECTORS.TEXT);\n        const options = document.querySelectorAll(SELECTORS.OPTIONS);\n\n        if (!custom || !selected) {\n            console.warn('No language switcher found');\n            return;\n        }\n\n        const currentLang = localStorage.getItem(STORAGE_KEY) || 'en';\n        this.setSelectedLanguage(text, options, currentLang);\n\n        selected.addEventListener('click', (e) => {\n            e.stopPropagation();\n            this.toggleDropdown(custom);\n        });\n\n        options.forEach(option => {\n            option.addEventListener('click', () => {\n                this.handleOptionClick(option, text, options, custom);\n            });\n        });\n\n        document.addEventListener('click', () => {\n            this.closeDropdown(custom);\n        });\n    },\n\n    async init() {\n        try {\n            const savedLang = await this.getLanguage();\n            const redirected = this.redirectIfNeeded(savedLang);\n\n            if (!redirected) {\n                this.bindCustomSelect();\n            }\n        } catch (error) {\n            console.error('LanguageSwitcher initialization failed:', error);\n            this.bindCustomSelect();\n        }\n    }\n};","import {ScreenManager} from \"./modules/ScreenManager\";\nimport {FormsManager} from \"./modules/FormsManager\";\nimport {NichesAccordion} from \"./modules/NichesAccordion\";\nimport {AppState} from \"./modules/AppState\";\nimport {LanguageSwitcher} from \"./modules/LanguageSwitcher\";\n\nfunction main() {\n  AppState.init()\n  LanguageSwitcher.init()\n  ScreenManager.init();\n  FormsManager.init();\n  NichesAccordion.init();\n}\n\nmain();\n\n// if (document.documentElement.clientWidth < 480) {\n//   window.addEventListener('scroll',\n//     function () {\n//       return setTimeout(main, 1000);\n//     }, {\n//       once: true\n//     });\n// } else {\n//   main();\n// }\n"],"names":["SELECTORS","SCREEN","VISIBLE_SCREEN","NAVIGATION_BUTTON","CSS_CLASSES","HIDDEN","SCREEN_EXIT","SCREEN_ENTER","TRANSITION_DURATION","ScreenManager","goToScreen","screenId","screens","document","querySelectorAll","targetScreen","getElementById","console","error","currentScreen","querySelector","classList","add","setTimeout","forEach","screen","remove","window","scrollTo","bindButtons","buttons","length","warn","button","addEventListener","dataset","init","SUBSCRIBE_PAGE","CALL_FORM","PROMO_CODE_FORM","PROMO_CODE_INPUT","PROMO_CODE_BUTTON","ORDER_FORM","redirectTypes","CALL_REQUEST","ORDER","CallRequestForm","callRequestForm","e","preventDefault","location","href","origin","PromoCodeForm","promoCodeForm","promoCodeInput","promoCodeButton","disabled","value","trim","target","OrderForm","orderForm","FormsManager","dataConfigParser","configSelector","configContainer","JSON","parse","config","UniversalRenderer","basePath","documentElement","lang","_createElement","element","createElement","tag","className","text","textContent","attributes","Object","entries","key","startsWith","setAttribute","children","childConfig","child","appendChild","_cleanRoot","root","replaceChildren","render","rootSelector","elements","fragment","createDocumentFragment","createdElement","prepend","PROBLEMS_SCREEN","ACCORDION_CONTAINER","ACCORDION_ITEMS","ACCORDION_HEADER","ACCORDION_CONTENT","RADIO_INPUT","NEXT_BUTTON","PRESENTATION_CONTENT","ORDER_FORM_CONTENT","ACTIVE","NichesAccordion","presentationData","orderFormData","_handleAccordionClick","clickedItem","allItems","item","_handleClick","event","accordionItem","closest","radioInput","niche","checked","_setFirstItemActive","firstItem","problemsScreen","accordionContainer","accordionItems","AppState","storageKey","state","_loadState","_initializeState","now","Date","initialState","userId","_generateUserId","createdAt","_formatLocalDate","createdAtInKyiv","_formatKyivDate","updatedAt","updatedAtInKyiv","data","_saveToStorage","Math","random","toString","substring","timestamp","date","_formatToCustomString","timeZone","options","year","month","day","hour","minute","second","hour12","formatted","Intl","DateTimeFormat","format","replace","stored","localStorage","getItem","setItem","stringify","set","get","getAll","getUserId","getCreatedAt","getUpdatedAt","clear","CUSTOM","SELECTED","TEXT","OPTIONS","STORAGE_KEY","COUNTRY_MAP","HR","SI","LANGUAGE_MAP","hr","sl","API_URL","LanguageSwitcher","detectUserLanguage","controller","AbortController","abort","response","fetch","signal","json","country_code","browserLang","navigator","language","split","getLanguage","savedLang","redirectIfNeeded","currentPath","pathname","isSubscribePage","includes","queryParams","search","toggleDropdown","custom","toggle","closeDropdown","setSelectedLanguage","currentLang","currentOption","Array","from","find","opt","code","handleOptionClick","option","bindCustomSelect","selected","stopPropagation","redirected","main"],"mappings":"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"}